import{r as xt,a as it,o as Dt,c as h,b as f,d as r,e as d,f as s,g as w,F as A,h as T,t as g,p as D,i as S,j as H,w as R,k as E,l as b,m as L,T as rt,C as z,n as N,q as ct,B as St,s as V,L as F,u as Ht,S as lt,v as $t,x as It,y as k,z as W,A as Ct,M as U,D as Tt,E as Y,G as dt,H as Et,I as ut,J as Ot,K as jt,P as Lt,N as Mt,O as Pt,Q as Bt,R as G,U as qt,V as Rt,W as K,X as zt,Y as Nt,Z as Vt,_ as Ft,$ as Wt}from"./vendor.94673814.js";const Ut=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))t(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function a(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerpolicy&&(l.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?l.credentials="include":c.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(c){if(c.ep)return;c.ep=!0;const l=a(c);fetch(c.href,l)}};Ut();const u=xt({user:{},account:{},habits:[],activeHabit:{},myAwards:[],myHabits:[],day:{},newAward:{},quote:{}}),_t=window.location.origin.includes("localhost"),Q=_t?"http://localhost:3000":"",Yt="dev-wvrfwzhq.us.auth0.com",Gt="lAcTCVPJK7nDO2DAFlGznd09I1Z68b49",Kt="https://JackDev.com",Qt={apiKey:"AIzaSyDeQ2_okhLsFQDNMaciif7MfHxosUmF33Y",authDomain:"ontrak-capstone.firebaseapp.com",projectId:"ontrak-capstone",storageBucket:"ontrak-capstone.appspot.com",messagingSenderId:"289407244703",appId:"1:289407244703:web:c560af06ddfd19f9ecc5aa",measurementId:"G-KBZEQ8SECW"};function O(o,e){if(_t)console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(o){case"log":case"assert":return}console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const $={log(){O("log",arguments)},error(){O("error",arguments)},warn(){O("warn",arguments)},assert(){O("assert",arguments)},trace(){O("trace",arguments)}},y=it.create({baseURL:Q,timeout:8e3}),nn=it.create({baseURL:"https://bcw-sandbox.herokuapp.com",timeout:8e3});class Zt{async getHabitsByQuery(e){const a=await y.get("api/habits",e);u.myHabits=a.data}async getHabitbyId(e){const a=await y.get("api/habits/"+e);u.activeHabit.unshift(a.data)}async createHabit(e){const a=await y.post("api/habits/",e);u.myHabits.unshift(a.data)}async editHabit(e){const a=await y.put("api/habits/"+e.id,e);let t=u.myHabits.findIndex(c=>c.id===a.data.id);t!=-1&&u.myHabits.splice(t,1,a.data),u.activeHabit=a.data}async archiveHabit(e){await y.delete("api/habits/"+e),u.activeHabit.isActive=!1;let a=u.myHabits.find(t=>t.id===e);a&&(a.isActive=!1)}async getMyHabits(){const e=await y.get("account/habits");u.myHabits=e.data}}const j=new Zt;var v=(o,e)=>{for(const[a,t]of e)o[a]=t;return o};const Jt={name:"App",setup(){function o(){u.day=new Date}return Dt(async()=>{o(),setInterval(o,6e4)}),{appState:h(()=>u)}}},Xt={class:"sticky-md-top"},te={class:"mobile"},ee=s("footer",null,null,-1);function ae(o,e,a,t,c,l){const n=f("Navbar"),i=f("router-view");return r(),d(A,null,[s("header",Xt,[w(n)]),s("main",te,[w(i)]),ee],64)}var oe=v(Jt,[["render",ae]]);const se={setup(){let o=new Date(u.day);o.setDate(o.getDate()+1);let e=new Date;e.setDate(o.getDate()-7);function a(t,c){const l=new Date(t.getTime()),n=[];for(;l<=c;){let i=new Date(l);n.push(i.toISOString().split("T")[0]),l.setDate(l.getDate()+1)}return n}return{habits:h(()=>u.myHabits),week:h(()=>a(e,o))}}},ht=o=>(D("data-v-5e7ffffc"),o=o(),S(),o),ne={class:"row"},ie={class:"col-12 bg-light rounded p-3 d-flex flex-column align-items-center brightness"},re=ht(()=>s("p",{class:"text-dark"},"Last 7 Days",-1)),ce={class:"container"},le={class:"col-2 display-none-mobile"},de={class:"d-flex h-100 justify-content-end align-items-center"},ue={class:"text-end"},_e={class:"m-0"},he=ht(()=>s("div",{class:"col-2 display-none-mobile"},null,-1)),be={class:"row justify-content-center display-none-mobile"},me={class:"pt-2 m-0"};function ge(o,e,a,t,c,l){const n=f("HabitWeeklySummary");return r(),d("div",ne,[s("div",ie,[re,s("div",ce,[(r(!0),d(A,null,T(t.habits,i=>(r(),d("div",{class:"d-flex text-dark text-center justify-content-center",key:i.id},[s("div",le,[s("div",de,[s("div",ue,[s("p",_e,g(i.title),1)])])]),w(n,{habit:i},null,8,["habit"]),he]))),128)),s("div",be,[(r(!0),d(A,null,T(t.week,i=>(r(),d("div",{class:"col-1 box rounded text-dark m-1",key:i},[s("p",me,g(i.split("-")[1])+"/"+g(i.split("-")[2]),1)]))),128))])])])])}var ve=v(se,[["render",ge],["__scopeId","data-v-5e7ffffc"]]),fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ve});const ye={setup(){let o=[],e=[];const a=H(!1);R(()=>{const n=new Date(u.account.createdAt),i=new Date(u.day);i.setDate(i.getDate()+1),u.myHabits.length&&a.value!=!0&&t(n,i)});function t(n,i){const _=new Date(n.getTime()),m=[];for(;_<=i;)m.push(new Date(_)),_.setDate(_.getDate()+1);c(m)}function c(n){for(let i=0;i<n.length;i++){const _=new Date(n[i]);let m=[],et=0;u.myHabits.forEach(I=>{if(new Date(I.createdAt).getTime()<_.getTime()){m.push(I);let at=0,ot=I.trackHistory.findIndex(At=>new Date(_).toDateString());I.trackHistory.forEach(At=>{let st=new Date(I.trackHistory[ot]).getDate(),nt=ot;for(;st==new Date(I.trackHistory[nt]).getDate();)at++,nt+=I.interval,st--}),et+=at}}),m.length!=0&&(o.push(_.toDateString().split(" ")[2]+" "+_.toDateString().split(" ")[1]),e.push(Math.floor(et)))}a.value=!0}const l=h(()=>{let n=[];return u.myHabits.forEach(i=>n.push({streak:i.streak,title:i.title,color:i.color})),n.sort((i,_)=>i.streak-_.streak).reverse(),n});return{dayLabels:o,dayData:e,lineMax:h(()=>e[-1]*2),lineLoaded:a,topStreaks:h(()=>l.value.slice(0,3)),loaded:h(()=>u.myHabits.length),activeHabitsData:h(()=>{let n=[];return n[0]=u.myHabits.filter(i=>i.isActive).length,n[1]=u.myHabits.filter(i=>!i.isActive).length,n})}}},Z=o=>(D("data-v-1629df44"),o=o(),S(),o),pe={class:"bg-primary rounded"},we={class:"row mb-4"},ke={class:"col-md-8 bg-light rounded p-3 chartbox"},Ae=Z(()=>s("p",{class:"text-dark text-center"},"My Top Streaks",-1)),xe={class:"col-md-3 m-start bg-light rounded text-center"},De=Z(()=>s("p",{class:"text-dark"},"Active / Archived",-1)),Se={class:"row"},He={class:"col-12 p-3 bg-light mb-4 rounded"},$e=Z(()=>s("p",{class:"text-dark"},"Streak Score",-1));function Ie(o,e,a,t,c,l){const n=f("BarChart"),i=f("PieChart"),_=f("LineChart");return r(),d(A,null,[s("div",pe,[s("div",we,[s("div",ke,[Ae,t.loaded?(r(),E(n,{key:0,chartData:{labels:t.topStreaks.map(m=>m.title),datasets:[{label:"",data:t.topStreaks.map(m=>m.streak),backgroundColor:t.topStreaks.map(m=>m.color)}]},chartOptions:{scales:{y:{ticks:{mirror:!0}}},indexAxis:"y",plugins:{legend:{display:!0,labels:t.topStreaks.map(m=>m.title)}}}},null,8,["chartData","chartOptions"])):b("",!0)]),s("div",xe,[De,w(i,{chartData:{labels:["Active","Archived"],datasets:[{data:t.activeHabitsData,backgroundColor:["#DE9A15","#D1F3EC"]}]}},null,8,["chartData"])])])]),s("div",Se,[s("div",He,[$e,t.lineLoaded?(r(),E(_,{key:0,chartData:{labels:t.dayLabels,datasets:[{label:"",data:t.dayData,fill:!1,borderColor:"#DE9A15",tension:.1}]},chartOptions:{scales:{y:{suggestedMax:t.dayData[t.dayData.length-1]*1.5,beginAtZero:!0},x:{ticks:{padding:1,autoSkip:!1,maxRotation:30,minRotation:30}}},plugins:{legend:{display:!1}}}},null,8,["chartData","chartOptions"])):b("",!0)])])],64)}var Ce=v(ye,[["render",Ie],["__scopeId","data-v-1629df44"]]),Te=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ce});const Ee={setup(){return{myHabitAwards:h(()=>u.myAwards.filter(o=>o.habitId)),myAccountAwards:h(()=>u.myAwards.filter(o=>!o.habitId))}}},J=o=>(D("data-v-ea94c928"),o=o(),S(),o),Oe={class:"row mb-4"},je={class:"col-12 bg-light rounded p-3"},Le=J(()=>s("p",{class:"text-dark"},"My Awards",-1)),Me={class:"row text-center text-dark justify-content-around"},Pe={key:0},Be=J(()=>s("u",null,"Habit Awards",-1)),qe=[Be],Re=["src","title"],ze={key:1},Ne={key:2},Ve=J(()=>s("u",null,"Account Awards",-1)),Fe=[Ve],We=["src"];function Ue(o,e,a,t,c,l){return r(),d("div",Oe,[s("div",je,[Le,s("div",Me,[t.myHabitAwards.length?(r(),d("p",Pe,qe)):b("",!0),(r(!0),d(A,null,T(t.myHabitAwards,n=>(r(),d("div",{class:"col-3",key:n.id},[s("img",{src:n.img,class:"img-fluid",title:"Streak award for "+n.habit.title},null,8,Re)]))),128)),t.myAccountAwards.length&&t.myHabitAwards.length?(r(),d("hr",ze)):b("",!0),t.myAccountAwards.length?(r(),d("p",Ne,Fe)):b("",!0),(r(!0),d(A,null,T(t.myAccountAwards,n=>(r(),d("div",{class:"col-3",key:n.id},[s("img",{crossorigin:"anonymous",src:n.img,class:"img-fluid"},null,8,We)]))),128))])])])}var Ye=v(Ee,[["render",Ue],["__scopeId","data-v-ea94c928"]]),Ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ye});const Ke={setup(){return{myHabits:h(()=>u.myHabits),awards:h(()=>u.myAwards),quote:h(()=>u.quote)}}},Qe={class:"container"},Ze={class:"row"},Je={class:"col-md-3 g-0"},Xe={class:"bg-primary rounded mt-4 me-3 p-3"},ta={class:"col-md-9 g-0"},ea={class:"ms-auto bg-primary rounded mt-4 p-3"},aa={key:0},oa={key:0,class:"text-end"};function sa(o,e,a,t,c,l){return r(),d("div",Qe,[s("div",Ze,[s("div",Je,[s("div",Xe,[s("h5",null,"Habits: "+g(t.myHabits.length),1),s("h5",null,"Awards: "+g(t.awards.length),1)])]),s("div",ta,[s("div",ea,[w(rt,{name:"slide-fade"},{default:L(()=>[t.quote?(r(),d("p",aa,g(t.quote.content),1)):b("",!0)]),_:1}),w(rt,{name:"slide-fade"},{default:L(()=>[t.quote?(r(),d("p",oa,[s("i",null,"-"+g(t.quote.author),1)])):b("",!0)]),_:1})])])])])}var na=v(Ke,[["render",sa],["__scopeId","data-v-7b03a8e0"]]),ia=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:na});const ra={props:{award:{type:Object,required:!0}},setup(){return{}}},ca={class:"component"},la=["src","title"];function da(o,e,a,t,c,l){return r(),d("div",ca,[s("img",{src:a.award.img,crossorigin:"anonymous",height:"270",alt:"",title:a.award.title,class:"award-mobile",style:{filter:"brightness(70%)"}},null,8,la)])}var ua=v(ra,[["render",da]]),_a=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ua});z.register(N,ct,St,V,F);const ha={components:{Bar:Ht},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},setup(){return{height:150}}};function ba(o,e,a,t,c,l){const n=f("Bar");return r(),E(n,{"chart-data":a.chartData,"chart-options":a.chartOptions,height:t.height},null,8,["chart-data","chart-options","height"])}var ma=v(ha,[["render",ba]]),ga=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ma});class C{static async confirm(e="Are you sure?",a="You won't be able to revert this!",t="warning",c="Yes, archive it!"){try{return!!(await lt.fire({title:e,text:a,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c})).isConfirmed}catch{return!1}}static toast(e="Warning!",a="warning",t="top-end",c=3e3,l=!0){lt.fire({title:e,icon:a,position:t,timer:c,timerProgressBar:l,toast:!0,showConfirmButton:!1})}}const va={props:{habit:{type:Object,required:!0}},setup(o){const e=H(!1),a=$t(),t=H(!1),c=H(!1),l=H(!1),n=new Date(o.habit.trackHistory[0]),i=u.day.getDate()-n.getDate(),_=!o.habit.trackHistory[0];return R(async()=>{n.toDateString()==u.day.toDateString()&&o.habit.interval>i&&(t.value=!0),i>o.habit.interval&&l.value!=!0&&(l.value=!0,o.habit.streak=0,await j.editHabit(o.habit))}),{isNew:_,lastTracked:n,timeSinceLastTracked:i,isTracked:t,isChecked:c,missed:l,flip:e,account:h(()=>u.account),myHabitAwards:h(()=>u.myAwards.filter(m=>m.habitId==o.habit.id)),goToHabitsDetailPage(){a.push({name:"HabitsDetailPage",params:{id:"h-"+o.habit.id}})},toggle(){e.value=!e.value,e.value?document.getElementById("h-"+o.habit.id).classList.remove("round"):document.getElementById("h-"+o.habit.id).classList.add("round"),It.getOrCreateInstance(document.getElementById(o.habit.id)).toggle()},async checkIn(){try{c.value=!0,o.habit.trackHistory.unshift(new Date),o.habit.streak++,await j.editHabit(o.habit)}catch(m){$.error(m),C.toast(m.message,"error")}}}}},x=o=>(D("data-v-9a1ebbbe"),o=o(),S(),o),fa={class:"col-12 d-flex justify-content-center w-100 align-items-center"},ya={id:"habit",class:"mt-3 justify-content-center"},pa=["id"],wa={class:"d-flex col-8"},ka={key:0,class:"mdi mdi-clock-alert-outline mx-2",title:"Check-in to keep your streak"},Aa=x(()=>s("span",{class:"mdi mdi-menu-down col-1"},null,-1)),xa={key:0,class:"mdi mdi-bell-alert col-1 text-end",title:"You missed your check-in!"},Da={key:1},Sa=x(()=>s("h5",{class:"col-1"},[s("i",null,"Archived")],-1)),Ha=[Sa],$a={key:2},Ia={key:0,class:"form-check"},Ca=x(()=>s("label",{class:"form-check-label visually-hidden",for:""}," Check if Habit Completed ",-1)),Ta=x(()=>s("h5",null,null,-1)),Ea={key:3,class:"d-flex align-items-center"},Oa=x(()=>s("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 130.2 130.2"},[s("circle",{class:"path circle",fill:"none",stroke:"#121213","stroke-width":"6","stroke-miterlimit":"10",cx:"65.1",cy:"65.1",r:"62.1"}),s("polyline",{class:"path check",fill:"none",stroke:"#121213","stroke-width":"6","stroke-linecap":"round","stroke-miterlimit":"10",points:"100.2,40.2 51.5,88.8 29.8,67.5 "})],-1)),ja=[Oa],La=["id"],Ma={class:"row w-100 g-0"},Pa={class:"col-md-5"},Ba={class:"p-2 m-2"},qa={key:0},Ra={key:0},za={key:1},Na={key:1,class:"text-start my-4"},Va={class:"col-md-7 g-0 mb-4 align-items-center"},Fa={class:"d-flex flex-column justify-content-between h-100 rounded"},Wa={key:0,class:"d-flex flex-column"},Ua=x(()=>s("hr",null,null,-1)),Ya=x(()=>s("p",{class:"p-3 mb-0 fs-5 fw-lighter"}," Your earned badges will be displayed here ",-1)),Ga=x(()=>s("hr",null,null,-1)),Ka=[Ua,Ya,Ga],Qa={key:1,class:"p-2 m-2"},Za={id:"badges",class:"d-flex m-3"},Ja=["src"],Xa={key:2,class:"d-flex flex-column align-items-end mt-auto text-dark m-1"},to=x(()=>s("h5",{class:"m-1"},"Last 7 days",-1));function eo(o,e,a,t,c,l){const n=f("HabitWeeklySummary");return r(),d("div",fa,[s("div",ya,[s("div",{class:"habit-bar d-flex justify-content-between align-items-center round text-start",style:k("background-color: "+a.habit.color),type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne",id:"h-"+a.habit.id,onClick:e[1]||(e[1]=W((...i)=>t.toggle&&t.toggle(...i),["stop"]))},[s("div",wa,[a.habit.interval-t.timeSinceLastTracked<1&&a.habit.isActive?(r(),d("div",ka)):b("",!0),s("h5",null,g(a.habit.title),1),Aa]),t.missed&&a.habit.isActive?(r(),d("div",xa)):b("",!0),a.habit.isActive?!t.isTracked||t.isNew?(r(),d("div",$a,[t.isNew||t.timeSinceLastTracked>=a.habit.interval?(r(),d("div",Ia,[s("input",{type:"checkbox",class:"form-check-input border border-primary",title:"mark habit complete",name:"",id:"",value:"checkedValue",onClick:e[0]||(e[0]=W((...i)=>t.checkIn&&t.checkIn(...i),["stop"]))}),Ca,Ta])):b("",!0)])):t.isTracked?(r(),d("div",Ea,ja)):b("",!0):(r(),d("div",Da,Ha))],12,pa),s("div",{id:a.habit.id,class:"collapse hide habit-body","aria-labelledby":"headingOne","data-parent":"#accordionExample"},[s("div",{class:"shadow short-round",style:k("filter: hue-rotate(5deg) brightness(140%); background-color: "+a.habit.color)},[s("div",Ma,[s("div",Pa,[s("div",Ba,[a.habit.isActive?(r(),d("span",qa,[t.isTracked?(r(),d("h4",Ra,"You've completed this habit today!")):b("",!0),s("p",null,"Your streak is "+g(a.habit.streak)+" days.",1),a.habit.interval-t.timeSinceLastTracked>0?(r(),d("p",za," You'll be reminded of this habit again in "+g(a.habit.interval-t.timeSinceLastTracked)+" day"+g(a.habit.interval-t.timeSinceLastTracked>1?"s":""),1)):b("",!0)])):b("",!0),a.habit.isActive?b("",!0):(r(),d("div",Na," This habit has been archived. ")),s("button",{class:"m-0 btn btn-outline-dark justify-flex-start d-flex",onClick:e[2]||(e[2]=i=>t.goToHabitsDetailPage())}," See More... ")])]),s("div",Va,[s("div",Fa,[t.myHabitAwards[0]?b("",!0):(r(),d("div",Wa,Ka)),t.myHabitAwards[0]?(r(),d("h3",Qa," My badges for this habit ")):b("",!0),s("div",Za,[(r(!0),d(A,null,T(t.myHabitAwards,i=>(r(),d("img",{key:i.id,src:i.img,alt:"",height:"100",style:{filter:"brightness(80%)"}},null,8,Ja))),128))]),a.habit.interval<7&&a.habit.isActive?(r(),d("div",Xa,[to,w(n,{habit:a.habit},null,8,["habit"])])):b("",!0)])])])],4)],8,La)])])}var ao=v(va,[["render",eo],["__scopeId","data-v-9a1ebbbe"]]),oo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ao});const so={props:{habit:{type:Object,required:!0}},setup(o){return{awards:h(()=>u.myAwards.filter(e=>e.habitId==o.habit.id)),async archiveHabit(){try{await C.confirm("Are you sure?","This habit will be archived, not deleted. Archived habits are not tracked and cannot be interacted with. ","warning","Yes, archive it.")&&await j.archiveHabit(o.habit.id)}catch(e){$.error(e),C.toast(e.message,"error")}}}}},X=o=>(D("data-v-7bcf8a6c"),o=o(),S(),o),no=["id"],io={class:"darken-30 p-3 mt-3 w-100"},ro={class:"mt-3 justify-content-center"},co=X(()=>s("h3",null,"Habit",-1)),lo={key:1},uo=X(()=>s("i",null,"Archived",-1)),_o=[uo],ho={class:"col-12 p-1 rounded bg-light"},bo={class:"col-12 p-1 my-2 rounded bg-light"},mo=X(()=>s("h3",null,"Last 7 Days",-1)),go={class:"col-12 d-flex justify-content-center"},vo={class:"col-12 bg-light d-flex justify-content-around"};function fo(o,e,a,t,c,l){const n=f("HabitWeeklySummary"),i=f("Award");return r(),d("div",{class:"col-12 d-flex fit-content(100vh) containerScroll container-scroll align-items-center scrollsnap",id:"h-"+a.habit.id},[s("div",io,[s("div",ro,[s("div",{class:"darken-30 w-100 p-3 m-0 d-flex justify-content-between rounded-top",style:k("background-color: "+a.habit.color)},[co,a.habit.isActive?(r(),d("button",{key:0,class:"btn btn-outline-dark",onClick:e[0]||(e[0]=_=>t.archiveHabit())}," Archive Habit ")):(r(),d("h5",lo,_o))],4),s("div",{class:"rounded-bottom p-3",style:k("filter: hue-rotate(5deg) brightness(140%); background-color: "+a.habit.color)},[s("h3",null,g(a.habit.title),1),s("div",ho,[s("h5",null,g(a.habit.inspo),1)]),s("div",bo,[s("h6",null," Current Streak: "+g(a.habit.streak)+" Max Streak: "+g(a.habit.maxStreak),1)]),mo,s("div",go,[w(n,{habit:a.habit},null,8,["habit"])]),s("div",vo,[(r(!0),d(A,null,T(t.awards,_=>(r(),E(i,{key:_.id,award:_},null,8,["award"]))),128))])],4)])])],8,no)}var yo=v(so,[["render",fo],["__scopeId","data-v-7bcf8a6c"]]),po=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:yo});const bt=Ct.initializeApp(Qt),wo=bt.auth(),ko=bt.storage();class Ao{async login(){try{const a=(await y.get("account/firebase")).data.token;await wo.signInWithCustomToken(a)}catch(e){$.error(e),C.toast(e.message,"error")}}async upload(e){return await(await ko.ref("Images").child("images").child("badges").child(e.name).put(e,{customMetadata:{uid:u.account.id,size:e.size,type:"Images"}})).ref.getDownloadURL()}}const mt=new Ao;const tt={setup(){const o=H({}),e=H([]),a=H(!1);return{showImgInput:a,formData:o,formColor:h(()=>`${o.value.color}`),account:h(()=>u.account),day:h(()=>u.day),toggleImgInput(){a.value=!a.value},setImage(t){e.value=t.target.files},async upload(){try{const t=await mt.upload(e.value[0])}catch(t){$.error(t),C.toast(t.message,"error")}},async newHabit(){try{o.value.interval=document.getElementById("habit-interval").value,o.value.accountId=this.account.id,await j.createHabit(o.value),o.value={},U.getOrCreateInstance(document.getElementById("newHabitModal")).toggle()}catch(t){$.error(t),C.toast(t.message,"error")}}}}},gt=()=>{Tt(o=>({"221fbfc4":o.formColor}))},vt=tt.setup;tt.setup=vt?(o,e)=>(gt(),vt(o,e)):gt;const xo=tt,M=o=>(D("data-v-6b592a5a"),o=o(),S(),o),Do={class:"mb-3"},So=M(()=>s("label",{for:"habit-title",class:"form-label"},"Give it a title:",-1)),Ho={class:"mb-3"},$o={class:"d-flex justify-content-between"},Io=M(()=>s("label",{for:"habit-inspo",class:"form-label"},"Why are you making this Habit?",-1)),Co={key:0},To={key:1},Eo=M(()=>s("small",{id:"helpId",class:"form-text text-muted"},"This is optional, but we will show it to you later.",-1)),Oo={class:"input-group mb-3"},jo=M(()=>s("label",{class:"form-check-label visually-hidden",id:"color-label",name:"color",for:"color"},"Choose Color",-1)),Lo=ut('<option class="border-top border-dark bg-danger dropdown-item" value="#EA9D55" data-v-6b592a5a> Orange </option><option class="border-top border-dark bg-warning dropdown-item" selected value="#FFECA8" data-v-6b592a5a> Yellow </option><option class="border-top border-dark bg-success dropdown-item" value="#D1F3EC" data-v-6b592a5a> Aqua </option><option class="border-top border-dark bg-primary dropdown-item text-light" value="#74A59A" data-v-6b592a5a> Green </option><option class="border-top border-dark bg-purple dropdown-item" value="#9BA5FF" data-v-6b592a5a> Purple </option>',5),Mo=[Lo],Po=ut('<div class="mb-3" data-v-6b592a5a><label for="habit-interval" data-v-6b592a5a>How often do you want us to remind you?</label><select name="habit-interval" id="habit-interval" class="rounded p-1 ms-2" required data-v-6b592a5a><option selected value="1" data-v-6b592a5a>Daily</option><option value="2" data-v-6b592a5a>Every other day</option><option value="7" data-v-6b592a5a>Weekly</option><option value="28" data-v-6b592a5a>Monthly</option></select></div><div class="modal-footer" data-v-6b592a5a><button type="button" class="btn btn-secondary" data-bs-target="newHabitModal" data-bs-dismiss="modal" data-v-6b592a5a> Close </button><button type="submit" class="btn btn-primary" data-v-6b592a5a>Submit</button></div>',2);function Bo(o,e,a,t,c,l){return r(),d("form",{name:"newHabitForm",onSubmit:e[4]||(e[4]=W((...n)=>t.newHabit&&t.newHabit(...n),["prevent"]))},[s("div",Do,[So,Y(s("input",{type:"text",class:"form-control",id:"habit-title",placeholder:"","onUpdate:modelValue":e[0]||(e[0]=n=>t.formData.title=n),required:"",max:"40"},null,512),[[dt,t.formData.title]])]),s("div",Ho,[s("div",$o,[Io,s("label",{class:"selectable px-1 rounded",onClick:e[1]||(e[1]=(...n)=>t.toggleImgInput&&t.toggleImgInput(...n)),for:""},[t.showImgInput?b("",!0):(r(),d("span",Co,"Add an image")),t.showImgInput?(r(),d("span",To,"Actually, just text")):b("",!0)])]),Y(s("input",{type:"text",class:"form-control",id:"habit-inspo",placeholder:"","onUpdate:modelValue":e[2]||(e[2]=n=>t.formData.inspo=n),max:"1000"},null,512),[[dt,t.formData.inspo]]),Eo]),s("div",Oo,[jo,Y(s("select",{class:"form-select rounded",required:"",name:"color",id:"color","aria-label":"Default select example",placeholder:"Choose A Color","onUpdate:modelValue":e[3]||(e[3]=n=>t.formData.color=n)},Mo,512),[[Et,t.formData.color]])]),Po],32)}var qo=v(xo,[["render",Bo],["__scopeId","data-v-6b592a5a"]]),Ro=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:qo});const zo={props:{habit:{type:Object,required:!0}},setup(o){const e=Ot();let a=new Date(u.day);a.setDate(a.getDate()+1);let t=new Date;t.setDate(a.getDate()-7);function c(l,n){const i=new Date(l.getTime()),_=[];for(;i<=n;){let m=new Date(i);_.push(m.toISOString().split("T")[0]),i.setDate(i.getDate()+1)}return _}return{route:e,today:h(()=>new Date),week:c(t,a),trackHistory:h(()=>{let l=[];return o.habit.trackHistory.forEach(n=>{let i=new Date(n);l.push(i.toISOString().split("T")[0])}),l})}}},No={class:"d-flex"},Vo={class:""},Fo={class:""},Wo={class:""},Uo={class:""},Yo={class:""},Go={class:""},Ko={class:""};function Qo(o,e,a,t,c,l){return r(),d("div",No,[s("div",Vo,[s("div",{class:"m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[0])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4)]),s("div",Fo,[s("div",{class:"m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[1])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4)]),s("div",Wo,[s("div",{class:"m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[2])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4)]),s("div",Uo,[s("div",{class:"m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[3])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4)]),s("div",Yo,[s("div",{class:"m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[4])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4)]),s("div",Go,[s("div",{class:"m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[5])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4)]),s("div",Ko,[s("div",{class:"m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[6])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4)])])}var Zo=v(zo,[["render",Qo]]),Jo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Zo});z.register(N,jt,V,F,Lt);const Xo={components:{Line:Mt},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},setup(){return{height:200}}};function ts(o,e,a,t,c,l){const n=f("Line");return r(),E(n,{"chart-data":a.chartData,"chart-options":a.chartOptions,height:t.height},null,8,["chart-data","chart-options","height"])}var es=v(Xo,[["render",ts]]),as=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:es});const os="modulepreload",ft={},ss="/",P=function(e,a){return!a||a.length===0?e():Promise.all(a.map(t=>{if(t=`${ss}${t}`,t in ft)return;ft[t]=!0;const c=t.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const n=document.createElement("link");if(n.rel=c?"stylesheet":os,c||(n.as="script",n.crossOrigin=""),n.href=t,document.head.appendChild(n),c)return new Promise((i,_)=>{n.addEventListener("load",i),n.addEventListener("error",_)})})).then(()=>e())};function ns(o){switch(o){case"./pages/AboutPage.vue":return P(()=>import("./AboutPage.4401be49.js"),["assets/AboutPage.4401be49.js","assets/vendor.94673814.js"]);case"./pages/AccountPage.vue":return P(()=>import("./AccountPage.56eaecc4.js"),["assets/AccountPage.56eaecc4.js","assets/vendor.94673814.js"]);case"./pages/HabitsDetailPage.vue":return P(()=>import("./HabitsDetailPage.7cedc1f1.js"),["assets/HabitsDetailPage.7cedc1f1.js","assets/vendor.94673814.js"]);case"./pages/HomePage.vue":return P(()=>import("./HomePage.3d7d096a.js"),["assets/HomePage.3d7d096a.js","assets/vendor.94673814.js"]);default:return new Promise(function(e,a){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function B(o){return()=>ns(`./pages/${o}.vue`)}const is=[{path:"/",name:"Home",component:B("HomePage"),beforeEnter:G},{path:"/about",name:"About",component:B("AboutPage")},{path:"/habitsDetailPage/:id",name:"HabitsDetailPage",component:B("HabitsDetailPage"),beforeEnter:G},{path:"/account",name:"Account",component:B("AccountPage"),beforeEnter:G}],yt=Pt({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:Bt(),routes:is});class rs{async getAccount(){try{const e=await y.get("/account");u.account=e.data}catch(e){$.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async editAccount(e){const a=await y.put("/account",e);u.account=a.data}async getMyAwards(){const e=await y.get("/account/awards");u.myAwards=e.data}}const cs=new rs;class ls{async getMyAwards(){const e=await y.get("/account/awards");u.myAwards=e.data}}const ds=new ls,q={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class us{constructor(e=!1,a=Q){this.socket=qt(a||Q),this.requiresAuth=e,this.queue=[],this.authenticated=!1,this.on(q.connected,this.onConnected).on(q.authenticated,this.onAuthenticated).on(q.error,this.onError)}on(e,a){var t;return(t=this.socket)==null||t.on(e,a.bind(this)),this}onConnected(e){this.connected=!0,this.playback()}onAuthenticated(e){this.authenticated=!0,this.playback()}authenticate(e){var a;(a=this.socket)==null||a.emit(q.authenticate,e)}onError(e){$.error("[SOCKET_ERROR]",e)}enqueue(e,a){$.log("[ENQUEING_ACTION]",{action:e,payload:a}),this.queue.push({action:e,payload:a})}playback(){const e=[...this.queue];this.queue=[],e.forEach(a=>{this.emit(a.action,a.payload)})}emit(e,a=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,a);if(!this.connected)return this.enqueue(e,a);this.socket.emit(e,a)}}class _s extends us{constructor(){super();this.on("error",this.onError).on("EARNED_BADGE",this.earnedBadge)}async earnedBadge(e){u.myAwards.push(e),u.newAward=await e.badge,U.getOrCreateInstance(document.getElementById("display-award")).show(),setTimeout(()=>{u.newAward={}},3e3)}onError(e){C.toast(e.message,"error")}}const pt=new _s,p=Rt({domain:Yt,clientId:Gt,audience:Kt,useRefreshTokens:!0,onRedirectCallback:o=>{yt.push(o&&o.targetUrl?o.targetUrl:window.location.pathname)}});p.on(p.AUTH_EVENTS.AUTHENTICATED,async function(){y.defaults.headers.authorization=p.bearer,y.interceptors.request.use(hs),u.user=p.user,await cs.getAccount(),pt.authenticate(p.bearer),await j.getMyHabits(u.user.id),await ds.getMyAwards(),await mt.login()});async function hs(o){if(!p.isAuthenticated)return o;const e=p.identity.exp*1e3,a=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return a?await p.loginWithPopup():t&&(await p.getTokenSilently(),y.defaults.headers.authorization=p.bearer,pt.authenticate(p.bearer)),o}const bs={setup(){return{user:h(()=>u.user),account:h(()=>u.account),async login(){p.loginWithPopup()},async logout(){p.logout({returnTo:window.location.origin})}}}},ms=o=>(D("data-v-3ac238e6"),o=o(),S(),o),gs={class:"navbar-text"},vs={key:1,class:"dropdown my-2 my-lg-0"},fs={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},ys={key:0,class:"px-2 p-1"},ps={class:"mx-3 text-success lighten-30"},ws={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},ks=ms(()=>s("i",{class:"mdi mdi-logout"},null,-1)),As=K(" logout "),xs=[ks,As];function Ds(o,e,a,t,c,l){return r(),d("span",gs,[t.user.isAuthenticated?(r(),d("div",vs,[s("div",fs,[t.account.picture?(r(),d("div",ys,[s("span",ps,g(t.account.name),1)])):b("",!0)]),s("div",ws,[s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...n)=>t.logout&&t.logout(...n))},xs)])])):(r(),d("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...n)=>t.login&&t.login(...n))}," Login "))])}var Ss=v(bs,[["render",Ds],["__scopeId","data-v-3ac238e6"]]),Hs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ss});const $s={setup(){return R(()=>{u.newAward&&setTimeout(()=>{U.getOrCreateInstance(document.getElementById("display-award")).hide()},2e3)}),{}}},Is={class:"modal",tabindex:"-1",role:"dialog"},Cs={class:"modal-dialog",role:"document"},Ts={class:""},Es={class:"modal-body"};function Os(o,e,a,t,c,l){return r(),d("div",Is,[s("div",Cs,[s("div",Ts,[s("div",Es,[zt(o.$slots,"body")])])])])}var js=v($s,[["render",Os]]),Ls=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:js});const Ms={setup(){return{account:h(()=>u.account)}}},wt=o=>(D("data-v-e8799c2c"),o=o(),S(),o),Ps={class:"bg-primary w-100 d-flex align-items-center active pt-2"},Bs={class:"d-flex justify-content-between col-6"},qs={class:"d-flex"},Rs=K(" Home "),zs=K(" Stats "),Ns={class:"col-6 text-end d-flex justify-content-end"},Vs={class:"modal fade",id:"newHabitModal",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},Fs={class:"modal-dialog",role:"document"},Ws={class:"modal-content"},Us=wt(()=>s("div",{class:"modal-header"},[s("h5",{class:"modal-title"},"What's Your Habit?"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Ys={key:0,class:"modal-body"},Gs=wt(()=>s("button",{class:"m-2 btn btn-info float elevation-5",type:"button",title:"Create a new habit","data-bs-toggle":"modal","data-bs-target":"#newHabitModal"},[s("i",{class:"mdi mdi-plus"})],-1));function Ks(o,e,a,t,c,l){const n=f("router-link"),i=f("Login"),_=f("HabitForm");return r(),d(A,null,[s("nav",Ps,[s("div",Bs,[s("div",qs,[s("h1",null,[w(n,{class:"btn text-success lighten-30 selectable text-uppercase",to:{name:"Home"}},{default:L(()=>[Rs]),_:1}),w(n,{to:{name:"Account"},class:"btn text-success lighten-30 selectable text-uppercase"},{default:L(()=>[zs]),_:1})])])]),s("div",Ns,[w(i)])]),s("div",Vs,[s("div",Fs,[s("div",Ws,[Us,t.account.id?(r(),d("div",Ys,[w(_)])):b("",!0)])])]),Gs],64)}var Qs=v(Ms,[["render",Ks],["__scopeId","data-v-e8799c2c"]]),Zs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Qs});z.register(Nt,N,ct,V,F,Vt);const Js={components:{Doughnut:Ft},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},setup(){return{}}};function Xs(o,e,a,t,c,l){const n=f("Doughnut");return r(),E(n,{"chart-data":a.chartData,"chart-options":a.chartOptions},null,8,["chart-data","chart-options"])}var tn=v(Js,[["render",Xs]]),en=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:tn});function an(o){Object.entries({"./components/AccountCalendarView.vue":fe,"./components/AccountCharts.vue":Te,"./components/AccountMyAwards.vue":Ge,"./components/AccountTopBar.vue":ia,"./components/Award.vue":_a,"./components/BarChart.vue":ga,"./components/Habit.vue":oo,"./components/HabitDetails.vue":po,"./components/HabitForm.vue":Ro,"./components/HabitWeeklySummary.vue":Jo,"./components/LineChart.vue":as,"./components/Login.vue":Hs,"./components/Modal.vue":Ls,"./components/Navbar.vue":Zs,"./components/PieChart.vue":en}).forEach(([a,t])=>{const c=t.name||a.substr(a.lastIndexOf("/")+1).replace(/\.\w+$/,"");o.component(c,t.default)})}const kt=Wt(oe);an(kt);kt.use(yt).mount("#app");export{u as A,C as P,v as _,j as h,nn as q};
