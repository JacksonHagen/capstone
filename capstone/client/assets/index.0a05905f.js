import{r as kt,a as nt,o as At,c as h,b as v,d as l,e as u,f as s,g as k,F as A,h as C,t as b,p as D,i as x,j as I,w as q,k as T,l as m,C as R,m as z,B as Dt,n as N,L as V,q as xt,S as it,u as St,s as Ht,v as w,x as W,y as $t,M as F,z as Ct,A as U,D as rt,E as It,G as ct,H as Tt,I as Et,P as Ot,J as Lt,K as Mt,N as jt,O as Y,Q as Pt,R as Bt,T as G,U as qt,V as lt,W as Rt,X as zt,Y as Nt,Z as Vt,_ as Wt}from"./vendor.2a6d92a6.js";const Ft=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function e(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=e(r);fetch(r.href,c)}};Ft();const d=kt({user:{},account:{},habits:[],activeHabit:{},myAwards:[],myHabits:[],day:{},newAward:{},quote:{}}),dt=window.location.origin.includes("localhost"),K=dt?"http://localhost:3000":"",Ut="dev-wvrfwzhq.us.auth0.com",Yt="lAcTCVPJK7nDO2DAFlGznd09I1Z68b49",Gt="https://JackDev.com",Kt={apiKey:"AIzaSyDeQ2_okhLsFQDNMaciif7MfHxosUmF33Y",authDomain:"ontrak-capstone.firebaseapp.com",projectId:"ontrak-capstone",storageBucket:"ontrak-capstone.appspot.com",messagingSenderId:"289407244703",appId:"1:289407244703:web:c560af06ddfd19f9ecc5aa",measurementId:"G-KBZEQ8SECW"};function M(o,t){if(dt)console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...t);else{switch(o){case"log":case"assert":return}console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...t)}}const S={log(){M("log",arguments)},error(){M("error",arguments)},warn(){M("warn",arguments)},assert(){M("assert",arguments)},trace(){M("trace",arguments)}},y=nt.create({baseURL:K,timeout:8e3}),Ws=nt.create({baseURL:"https://bcw-sandbox.herokuapp.com",timeout:8e3});class Qt{async getHabitsByQuery(t){const e=await y.get("api/habits",t);d.habits=e.data}async getHabitbyId(t){const e=await y.get("api/habits/"+t);d.activeHabit.unshift(e.data)}async createHabit(t){const e=await y.post("api/habits/",t);d.myHabits.unshift(e.data),d.habits.unshift(e.data)}async editHabit(t){const e=await y.put("api/habits/"+t.id,t);let a=d.habits.findIndex(c=>c.id===e.data.id);a!=-1&&d.habits.splice(a,1,e.data);let r=d.myHabits.findIndex(c=>c.id===e.data.id);r!=-1&&d.myHabits.splice(r,1,e.data),d.activeHabit=e.data}async archiveHabit(t){await y.delete("api/habits/"+t),d.activeHabit.isActive=!1;let e=d.myHabits.find(a=>a.id===t);e&&(e.isActive=!1)}async getMyHabits(){const t=await y.get("account/habits");d.myHabits=t.data}checkLastTracking(){d.day.getDate()}}const E=new Qt;var g=(o,t)=>{for(const[e,a]of t)o[e]=a;return o};const Zt={name:"App",setup(){function o(){d.day=new Date}return At(async()=>{o(),setInterval(o,6e4)}),{appState:h(()=>d)}}},Jt={class:"sticky-md-top"},Xt={class:"mobile"},te=s("footer",null,null,-1);function ee(o,t,e,a,r,c){const n=v("Navbar"),i=v("router-view");return l(),u(A,null,[s("header",Jt,[k(n)]),s("main",Xt,[k(i)]),te],64)}var ae=g(Zt,[["render",ee]]);const oe={setup(){let o=new Date(d.day);o.setDate(o.getDate()+1);let t=new Date;t.setDate(o.getDate()-7);function e(a,r){const c=new Date(a.getTime()),n=[];for(;c<=r;){let i=new Date(c);n.push(i.toISOString().split("T")[0]),c.setDate(c.getDate()+1)}return n}return{habits:h(()=>d.myHabits),week:h(()=>e(t,o))}}},ut=o=>(D("data-v-4b59cbd0"),o=o(),x(),o),se={class:"row"},ne={class:"col-12 bg-light rounded p-3 d-flex flex-column align-items-center brightness"},ie=ut(()=>s("p",{class:"text-dark"},"Last 7 Days",-1)),re={class:"container"},ce={class:"col-2 display-none-mobile"},le={class:"d-flex h-100 justify-content-end align-items-center"},de={class:"text-end"},ue={class:"m-0"},_e={class:"display-none-desktop m-0 mt-1"},he=ut(()=>s("div",{class:"col-2 display-none-mobile"},null,-1)),be={class:"row justify-content-center display-none-mobile"},me={class:"pt-2 m-0"};function ge(o,t,e,a,r,c){const n=v("HabitWeeklySummary");return l(),u("div",se,[s("div",ne,[ie,s("div",re,[(l(!0),u(A,null,C(a.habits,i=>(l(),u("div",{class:"row text-dark text-center justify-content-center",key:i.id},[s("div",ce,[s("div",le,[s("div",de,[s("p",ue,b(i.title),1)])])]),s("p",_e,b(i.title),1),k(n,{habit:i},null,8,["habit"]),he]))),128)),s("div",be,[(l(!0),u(A,null,C(a.week,i=>(l(),u("div",{class:"col-1 box rounded text-dark m-1",key:i},[s("p",me,b(i.split("-")[1])+"/"+b(i.split("-")[2]),1)]))),128))])])])])}var ve=g(oe,[["render",ge],["__scopeId","data-v-4b59cbd0"]]),ye=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ve});const fe={setup(){let o=[],t=[];const e=I(!1);q(()=>{const n=new Date(d.account.createdAt),i=new Date(d.day);i.setDate(i.getDate()+1),d.myHabits.length&&e.value!=!0&&a(n,i)});function a(n,i){const _=new Date(n.getTime()),f=[];for(;_<=i;)f.push(new Date(_)),_.setDate(_.getDate()+1);r(f)}function r(n){for(let i=0;i<n.length;i++){const _=new Date(n[i]);let f=[],tt=0;d.myHabits.forEach(H=>{if(new Date(H.createdAt).getTime()<_.getTime()){f.push(H);let et=0,at=H.trackHistory.findIndex(wt=>new Date(_).toDateString());H.trackHistory.forEach(wt=>{let ot=new Date(H.trackHistory[at]).getDate(),st=at;for(;ot==new Date(H.trackHistory[st]).getDate();)et++,st+=H.interval,ot--}),tt+=et}}),f.length!=0&&(o.push(_.toDateString()),t.push(Math.floor(tt)))}e.value=!0}const c=h(()=>{let n=[];return d.habits.forEach(i=>n.push({streak:i.streak,title:i.title,color:i.color})),n.sort((i,_)=>i.streak-_.streak).reverse(),n});return{dayLabels:o,dayData:t,lineMax:h(()=>t[-1]*2),lineLoaded:e,topStreaks:h(()=>c.value.slice(0,3)),loaded:h(()=>d.myHabits.length),activeHabitsData:h(()=>{let n=[];return n[0]=d.myHabits.filter(i=>i.isActive).length,n[1]=d.myHabits.filter(i=>!i.isActive).length,n})}}},Q=o=>(D("data-v-758d703c"),o=o(),x(),o),pe={class:"bg-primary rounded"},we={class:"row mb-4"},ke={class:"col-md-8 mb-4 bg-light rounded p-3"},Ae=Q(()=>s("p",{class:"text-dark text-center"},"My Top Streaks",-1)),De={class:"col-md-3 m-start bg-light p-2 rounded text-center"},xe=Q(()=>s("p",{class:"text-dark"},"Active / Archived",-1)),Se={class:"row"},He={class:"col-12 p-3 bg-light mb-4 rounded"},$e=Q(()=>s("p",{class:"text-dark"},"Streak Score",-1));function Ce(o,t,e,a,r,c){const n=v("BarChart"),i=v("PieChart"),_=v("LineChart");return l(),u(A,null,[s("div",pe,[s("div",we,[s("div",ke,[Ae,a.loaded?(l(),T(n,{key:0,chartData:{labels:a.topStreaks.map(f=>f.title),datasets:[{label:"",data:a.topStreaks.map(f=>f.streak),backgroundColor:a.topStreaks.map(f=>f.color)}]},chartOptions:{indexAxis:"y",plugins:{legend:{display:!1}}}},null,8,["chartData"])):m("",!0)]),s("div",De,[xe,k(i,{chartData:{labels:["Active","Archived"],datasets:[{data:a.activeHabitsData,backgroundColor:["#DE9A15","#D1F3EC"]}]}},null,8,["chartData"])])])]),s("div",Se,[s("div",He,[$e,a.lineLoaded?(l(),T(_,{key:0,chartData:{labels:a.dayLabels,datasets:[{label:"",data:a.dayData,fill:!1,borderColor:"#DE9A15",tension:.1}]},chartOptions:{scales:{y:{suggestedMax:a.dayData[-1]+30,beginAtZero:!0},x:{ticks:{padding:1,autoSkip:!1,maxRotation:45,minRotation:45}}},plugins:{legend:{display:!1}}}},null,8,["chartData","chartOptions"])):m("",!0)])])],64)}var Ie=g(fe,[["render",Ce],["__scopeId","data-v-758d703c"]]),Te=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ie});const Ee={setup(){return{myHabitAwards:h(()=>d.myAwards.filter(o=>o.habitId)),myAccountAwards:h(()=>d.myAwards.filter(o=>!o.habitId))}}},Z=o=>(D("data-v-598e164f"),o=o(),x(),o),Oe={class:"row mb-4"},Le={class:"col-12 bg-light rounded p-3"},Me=Z(()=>s("p",{class:"text-dark"},"My Awards",-1)),je={class:"row text-center text-dark justify-content-around"},Pe={key:0},Be=Z(()=>s("u",null,"Habit Awards",-1)),qe=[Be],Re=["src","title"],ze={key:1},Ne={key:2},Ve=Z(()=>s("u",null,"Account Awards",-1)),We=[Ve],Fe=["src"];function Ue(o,t,e,a,r,c){return l(),u("div",Oe,[s("div",Le,[Me,s("div",je,[a.myHabitAwards.length?(l(),u("p",Pe,qe)):m("",!0),(l(!0),u(A,null,C(a.myHabitAwards,n=>(l(),u("div",{class:"col-3",key:n.id},[s("img",{src:n.img,class:"img-fluid",title:"Streak award for "+n.habit.title},null,8,Re)]))),128)),a.myAccountAwards.length&&a.myHabitAwards.length?(l(),u("hr",ze)):m("",!0),a.myAccountAwards.length?(l(),u("p",Ne,We)):m("",!0),(l(!0),u(A,null,C(a.myAccountAwards,n=>(l(),u("div",{class:"col-3",key:n.id},[s("img",{src:n.img,class:"img-fluid"},null,8,Fe)]))),128))])])])}var Ye=g(Ee,[["render",Ue],["__scopeId","data-v-598e164f"]]),Ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ye});const Ke={setup(){return{myHabits:h(()=>d.myHabits),awards:h(()=>d.myAwards),quote:h(()=>d.quote)}}},Qe={class:"container"},Ze={class:"row"},Je={class:"col-md-2 bg-primary rounded mt-4 p-3"},Xe={class:"col-md-9 bg-primary rounded mt-4 offset-md-1 p-3"},ta={class:"ms-5"};function ea(o,t,e,a,r,c){return l(),u("div",Qe,[s("div",Ze,[s("div",Je,[s("h5",null,"Habits: "+b(a.myHabits.length),1),s("h5",null,"Awards: "+b(a.awards.length),1)]),s("div",Xe,[s("p",null,b(a.quote.content),1),s("p",ta,[s("i",null,"-"+b(a.quote.author),1)])])])])}var aa=g(Ke,[["render",ea]]),oa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:aa});const sa={props:{award:{type:Object,required:!0}},setup(){return{}}},na={class:"component"},ia=["src","title"];function ra(o,t,e,a,r,c){return l(),u("div",na,[s("img",{src:e.award.img,height:"270",alt:"",title:e.award.title,class:"award-mobile",style:{filter:"brightness(70%)"}},null,8,ia)])}var ca=g(sa,[["render",ra]]),la=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ca});R.register(z,Dt,N,V);const da={components:{Bar:xt},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},setup(){return{height:150}}};function ua(o,t,e,a,r,c){const n=v("Bar");return l(),T(n,{"chart-data":e.chartData,"chart-options":e.chartOptions,height:a.height},null,8,["chart-data","chart-options","height"])}var _a=g(da,[["render",ua]]),ha=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_a});class ${static async confirm(t="Are you sure?",e="You won't be able to revert this!",a="warning",r="Yes, delete it!"){try{return!!(await it.fire({title:t,text:e,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(t="Warning!",e="warning",a="top-end",r=3e3,c=!0){it.fire({title:t,icon:e,position:a,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}}const ba={props:{habit:{type:Object,required:!0}},setup(o){const t=I(!1),e=St(),a=I(!1),r=I(!1),c=new Date(o.habit.trackHistory[0]),n=d.day.getDate()-c.getDate(),i=!o.habit.trackHistory[0];return q(async()=>{c.toDateString()==d.day.toDateString()&&o.habit.interval>n&&(a.value=!0),n>o.habit.interval&&r.value!=!0&&(r.value=!0,o.habit.streak=0,await E.editHabit(o.habit))}),{isNew:i,lastTracked:c,timeSinceLastTracked:n,isTracked:a,missed:r,flip:t,account:h(()=>d.account),myHabitAwards:h(()=>d.myAwards.filter(_=>_.habitId==o.habit.id)),goToHabitsDetailPage(){e.push({name:"HabitsDetailPage",params:{id:"h-"+o.habit.id}})},toggle(){t.value=!t.value,t.value?document.getElementById("h-"+o.habit.id).classList.remove("round"):document.getElementById("h-"+o.habit.id).classList.add("round"),Ht.getOrCreateInstance(document.getElementById(o.habit.id)).toggle()},async checkIn(){try{o.habit.trackHistory.unshift(new Date),o.habit.streak++,await E.editHabit(o.habit)}catch(_){S.error(_),$.toast(_.message,"error")}}}}},O=o=>(D("data-v-fe819918"),o=o(),x(),o),ma={class:"col-12 d-flex justify-content-center w-100 align-items-center"},ga={id:"habit",class:"mt-3 justify-content-center"},va=["id"],ya={class:"d-flex col-8"},fa={key:0,class:"mdi mdi-clock-alert-outline mx-2",title:"Check-in to keep your streak"},pa=O(()=>s("span",{class:"mdi mdi-menu-down col-1"},null,-1)),wa={key:0,class:"mdi mdi-bell-alert col-1 text-end",title:"You missed your check-in!"},ka={key:1},Aa=O(()=>s("h5",{class:"col-1"},[s("i",null,"Archived")],-1)),Da=[Aa],xa={key:2},Sa={key:0,class:"form-check"},Ha=O(()=>s("label",{class:"form-check-label visually-hidden",for:""}," Check if Habit Completed ",-1)),$a=O(()=>s("h5",null,null,-1)),Ca={key:3},Ia=O(()=>s("h5",null,"Well Done!",-1)),Ta=[Ia],Ea=["id"],Oa={class:"row w-100"},La={class:"col-md-6"},Ma={class:"p-2 m-2"},ja={key:0},Pa={key:0},Ba={key:1},qa={key:1,class:"text-start my-4"},Ra={class:"col-md-6 mb-4 align-items-center"},za={class:"h-100 rounded"},Na={key:0,class:"p-2 m-2"},Va={id:"badges",class:"d-flex m-3"},Wa=["src"],Fa={key:1,class:"text-dark row m-1"},Ua=O(()=>s("h5",{class:"m-1"},"Last 7 days",-1)),Ya={class:"col-12 d-flex"};function Ga(o,t,e,a,r,c){const n=v("HabitWeeklySummary");return l(),u("div",ma,[s("div",ga,[s("div",{class:"habit-bar d-flex justify-content-between align-items-center round text-start",style:w("background-color: "+e.habit.color),type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne",id:"h-"+e.habit.id,onClick:t[1]||(t[1]=W((...i)=>a.toggle&&a.toggle(...i),["stop"]))},[s("div",ya,[e.habit.interval-a.timeSinceLastTracked<1&&e.habit.isActive?(l(),u("div",fa)):m("",!0),s("h5",null,b(e.habit.title),1),pa]),a.missed&&e.habit.isActive?(l(),u("div",wa)):m("",!0),e.habit.isActive?!a.isTracked||a.isNew?(l(),u("div",xa,[a.isNew||a.timeSinceLastTracked>=e.habit.interval?(l(),u("div",Sa,[s("input",{type:"checkbox",class:"form-check-input border border-primary",title:"mark habit complete",name:"",id:"",value:"checkedValue",onClick:t[0]||(t[0]=W((...i)=>a.checkIn&&a.checkIn(...i),["stop"]))}),Ha,$a])):m("",!0)])):a.isTracked?(l(),u("div",Ca,Ta)):m("",!0):(l(),u("div",ka,Da))],12,va),s("div",{id:e.habit.id,class:"collapse hide habit-body","aria-labelledby":"headingOne","data-parent":"#accordionExample"},[s("div",{class:"shadow short-round",style:w("filter: hue-rotate(5deg) brightness(140%); background-color: "+e.habit.color)},[s("div",Oa,[s("div",La,[s("div",Ma,[e.habit.isActive?(l(),u("span",ja,[a.isTracked?(l(),u("h4",Pa,"You've completed this habit today!")):m("",!0),s("p",null,"Your streak is "+b(e.habit.streak)+" days.",1),e.habit.interval-a.timeSinceLastTracked>0?(l(),u("p",Ba," You'll be reminded of this habit again in "+b(e.habit.interval-a.timeSinceLastTracked)+" day"+b(e.habit.interval-a.timeSinceLastTracked>1?"s":""),1)):m("",!0)])):m("",!0),e.habit.isActive?m("",!0):(l(),u("div",qa," This habit has been archived. ")),s("button",{class:"m-0 btn btn-outline-dark justify-flex-start d-flex",onClick:t[2]||(t[2]=i=>a.goToHabitsDetailPage())}," See More... ")])]),s("div",Ra,[s("div",za,[a.myHabitAwards[0]?(l(),u("h3",Na," My badges for this habit ")):m("",!0),s("div",Va,[(l(!0),u(A,null,C(a.myHabitAwards,i=>(l(),u("img",{key:i.id,src:i.img,alt:"",height:"100",style:{filter:"brightness(80%)"}},null,8,Wa))),128))]),e.habit.interval<7&&e.habit.isActive?(l(),u("div",Fa,[Ua,s("div",Ya,[k(n,{habit:e.habit},null,8,["habit"])])])):m("",!0)])])])],4)],8,Ea)])])}var Ka=g(ba,[["render",Ga],["__scopeId","data-v-fe819918"]]),Qa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ka});const Za={props:{habit:{type:Object,required:!0}},setup(o){return{awards:h(()=>d.myAwards.filter(t=>t.habitId==o.habit.id)),async archiveHabit(){try{await $.confirm()&&await E.archiveHabit(o.habit.id)}catch(t){S.error(t),$.toast(t.message,"error")}}}}},J=o=>(D("data-v-8f072944"),o=o(),x(),o),Ja=["id"],Xa={class:"darken-30 p-3 mt-3 w-100"},to={class:"mt-3 justify-content-center"},eo=J(()=>s("h3",null,"Habit",-1)),ao={key:1},oo=J(()=>s("i",null,"Archived",-1)),so=[oo],no={class:"col-12 p-1 rounded bg-light"},io={class:"col-12 p-1 my-2 rounded bg-light"},ro=J(()=>s("h3",null,"Last 7 Days",-1)),co={class:"col-12 d-flex justify-content-center"},lo={class:"col-12 bg-light d-flex justify-content-around"};function uo(o,t,e,a,r,c){const n=v("HabitWeeklySummary"),i=v("Award");return l(),u("div",{class:"col-12 d-flex fit-content(100vh) containerScroll container-scroll align-items-center scrollsnap",id:"h-"+e.habit.id},[s("div",Xa,[s("div",to,[s("div",{class:"darken-30 w-100 p-3 m-0 d-flex justify-content-between rounded-top",style:w("background-color: "+e.habit.color)},[eo,e.habit.isActive?(l(),u("button",{key:0,class:"btn btn-outline-dark",onClick:t[0]||(t[0]=_=>a.archiveHabit())}," Archive Habit ")):(l(),u("h5",ao,so))],4),s("div",{class:"rounded-bottom p-3",style:w("filter: hue-rotate(5deg) brightness(140%); background-color: "+e.habit.color)},[s("h3",null,b(e.habit.title),1),s("div",no,[s("h5",null,b(e.habit.inspo),1)]),s("div",io,[s("h6",null," Current Streak: "+b(e.habit.streak)+" Max Streak: "+b(e.habit.maxStreak),1)]),ro,s("div",co,[k(n,{habit:e.habit},null,8,["habit"])]),s("div",lo,[(l(!0),u(A,null,C(a.awards,_=>(l(),T(i,{key:_.id,award:_},null,8,["award"]))),128))])],4)])])],8,Ja)}var _o=g(Za,[["render",uo],["__scopeId","data-v-8f072944"]]),ho=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_o});const _t=$t.initializeApp(Kt),bo=_t.auth(),mo=_t.storage();class go{async login(){try{const e=(await y.get("account/firebase")).data.token;await bo.signInWithCustomToken(e)}catch(t){S.error(t),$.toast(t.message,"error")}}async upload(t){return await(await mo.ref("Images").child("images").child("badges").child(t.name).put(t,{customMetadata:{uid:d.account.id,size:t.size,type:"Images"}})).ref.getDownloadURL()}}const ht=new go;const X={setup(){const o=I({}),t=I([]);return{formData:o,formColor:h(()=>`${o.value.color}`),account:h(()=>d.account),day:h(()=>d.day),setImage(e){t.value=e.target.files},async upload(){try{const e=await ht.upload(t.value[0])}catch(e){S.error(e),$.toast(e.message,"error")}},async newHabit(){try{o.value.interval=document.getElementById("habit-interval").value,o.value.accountId=this.account.id,await E.createHabit(o.value),o.value={},F.getOrCreateInstance(document.getElementById("newHabitModal")).toggle()}catch(e){S.error(e),$.toast(e.message,"error")}}}}},bt=()=>{Ct(o=>({"2489d458-formColor":o.formColor}))},mt=X.setup;X.setup=mt?(o,t)=>(bt(),mt(o,t)):bt;const vo=X,L=o=>(D("data-v-2489d458"),o=o(),x(),o),yo={class:"mb-3"},fo=L(()=>s("label",{for:"habit-title",class:"form-label"},"Give it a title:",-1)),po={class:"mb-3"},wo=L(()=>s("label",{for:"habit-inspo",class:"form-label"},"Why are you making this Habit?",-1)),ko=L(()=>s("small",{id:"helpId",class:"form-text text-muted"},"This is optional, but we will show it to you later.",-1)),Ao=L(()=>s("label",{for:"habit-inspo-img",class:"form-label"},"Image",-1)),Do=L(()=>s("small",null," This is also optional, but we will show it to you later.",-1)),xo={class:"input-group mb-3"},So=L(()=>s("label",{class:"form-check-label visually-hidden",id:"color-label",name:"color",for:"color"},"Choose Color",-1)),Ho=ct('<option class="border-top border-dark bg-danger dropdown-item" value="#EA9D55" data-v-2489d458> Orange </option><option class="border-top border-dark bg-warning dropdown-item" selected value="#FFECA8" data-v-2489d458> Yellow </option><option class="border-top border-dark bg-success dropdown-item" value="#D1F3EC" data-v-2489d458> Aqua </option><option class="border-top border-dark bg-primary dropdown-item text-light" value="#74A59A" data-v-2489d458> Green </option><option class="border-top border-dark bg-purple dropdown-item" value="#9BA5FF" data-v-2489d458> Purple </option>',5),$o=[Ho],Co=ct('<div class="mb-3" data-v-2489d458><label for="habit-interval" data-v-2489d458>How often do you want us to remind you?</label><select name="habit-interval" id="habit-interval" class="rounded p-1 ms-2" required data-v-2489d458><option selected value="1" data-v-2489d458>Daily</option><option value="2" data-v-2489d458>Every other day</option><option value="7" data-v-2489d458>Weekly</option><option value="28" data-v-2489d458>Monthly</option></select></div><div class="modal-footer" data-v-2489d458><button type="button" class="btn btn-secondary" data-bs-target="newHabitModal" data-bs-dismiss="modal" data-v-2489d458> Close </button><button type="submit" class="btn btn-primary" data-v-2489d458>Submit</button></div>',2);function Io(o,t,e,a,r,c){return l(),u("form",{name:"newHabitForm",onSubmit:t[4]||(t[4]=W((...n)=>a.newHabit&&a.newHabit(...n),["prevent"]))},[s("div",yo,[fo,U(s("input",{type:"text",class:"form-control",id:"habit-title",placeholder:"","onUpdate:modelValue":t[0]||(t[0]=n=>a.formData.title=n),required:"",max:"40"},null,512),[[rt,a.formData.title]])]),s("div",po,[wo,U(s("input",{type:"text",class:"form-control",id:"habit-inspo",placeholder:"","onUpdate:modelValue":t[1]||(t[1]=n=>a.formData.inspo=n),max:"1000"},null,512),[[rt,a.formData.inspo]]),ko]),s("div",null,[Ao,s("input",{onChange:t[2]||(t[2]=(...n)=>a.setImage&&a.setImage(...n)),class:"form-control",type:"file",id:"habit-inspo-img",accept:"image/*"},null,32),Do]),s("div",xo,[So,U(s("select",{class:"form-select rounded",required:"",name:"color",id:"color","aria-label":"Default select example",placeholder:"Choose A Color","onUpdate:modelValue":t[3]||(t[3]=n=>a.formData.color=n)},$o,512),[[It,a.formData.color]])]),Co],32)}var To=g(vo,[["render",Io],["__scopeId","data-v-2489d458"]]),Eo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:To});const Oo={props:{habit:{type:Object,required:!0}},setup(o){const t=Tt();let e=new Date(d.day);e.setDate(e.getDate()+1);let a=new Date;a.setDate(e.getDate()-7);function r(c,n){const i=new Date(c.getTime()),_=[];for(;i<=n;){let f=new Date(i);_.push(f.toISOString().split("T")[0]),i.setDate(i.getDate()+1)}return _}return{route:t,today:h(()=>new Date),week:r(a,e),trackHistory:h(()=>{let c=[];return o.habit.trackHistory.forEach(n=>{let i=new Date(n);c.push(i.toISOString().split("T")[0])}),c})}}};function Lo(o,t,e,a,r,c){return l(),u(A,null,[s("div",{class:"col-1 m-1 rounded border box",style:w("background-color: "+(a.trackHistory.includes(a.week[0])?e.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:w("background-color: "+(a.trackHistory.includes(a.week[1])?e.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:w("background-color: "+(a.trackHistory.includes(a.week[2])?e.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:w("background-color: "+(a.trackHistory.includes(a.week[3])?e.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:w("background-color: "+(a.trackHistory.includes(a.week[4])?e.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:w("background-color: "+(a.trackHistory.includes(a.week[5])?e.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:w("background-color: "+(a.trackHistory.includes(a.week[6])?e.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4)],64)}var Mo=g(Oo,[["render",Lo]]),jo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mo});R.register(z,Et,N,V,Ot);const Po={components:{Line:Lt},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},setup(){return{height:200}}};function Bo(o,t,e,a,r,c){const n=v("Line");return l(),T(n,{"chart-data":e.chartData,"chart-options":e.chartOptions,height:a.height},null,8,["chart-data","chart-options","height"])}var qo=g(Po,[["render",Bo]]),Ro=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:qo});const zo="modulepreload",gt={},No="/",j=function(t,e){return!e||e.length===0?t():Promise.all(e.map(a=>{if(a=`${No}${a}`,a in gt)return;gt[a]=!0;const r=a.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":zo,r||(n.as="script",n.crossOrigin=""),n.href=a,document.head.appendChild(n),r)return new Promise((i,_)=>{n.addEventListener("load",i),n.addEventListener("error",_)})})).then(()=>t())};function Vo(o){switch(o){case"./pages/AboutPage.vue":return j(()=>import("./AboutPage.64981965.js"),["assets/AboutPage.64981965.js","assets/vendor.2a6d92a6.js"]);case"./pages/AccountPage.vue":return j(()=>import("./AccountPage.751bf8a1.js"),["assets/AccountPage.751bf8a1.js","assets/vendor.2a6d92a6.js"]);case"./pages/HabitsDetailPage.vue":return j(()=>import("./HabitsDetailPage.bb5e11c2.js"),["assets/HabitsDetailPage.bb5e11c2.js","assets/vendor.2a6d92a6.js"]);case"./pages/HomePage.vue":return j(()=>import("./HomePage.89011c88.js"),["assets/HomePage.89011c88.js","assets/vendor.2a6d92a6.js"]);default:return new Promise(function(t,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function P(o){return()=>Vo(`./pages/${o}.vue`)}const Wo=[{path:"/",name:"Home",component:P("HomePage")},{path:"/about",name:"About",component:P("AboutPage"),beforeEnter:Y},{path:"/habitsDetailPage/:id",name:"HabitsDetailPage",component:P("HabitsDetailPage"),beforeEnter:Y},{path:"/account",name:"Account",component:P("AccountPage"),beforeEnter:Y}],vt=Mt({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:jt(),routes:Wo});class Fo{async getAccount(){try{const t=await y.get("/account");d.account=t.data}catch(t){S.error("HAVE YOU STARTED YOUR SERVER YET???",t)}}async editAccount(t){const e=await y.put("/account",t);d.account=e.data}async getMyAwards(){const t=await y.get("/account/awards");d.myAwards=t.data}}const Uo=new Fo;class Yo{async getMyAwards(){const t=await y.get("/account/awards");d.myAwards=t.data}}const Go=new Yo,B={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Ko{constructor(t=!1,e=K){this.socket=Pt(e||K),this.requiresAuth=t,this.queue=[],this.authenticated=!1,this.on(B.connected,this.onConnected).on(B.authenticated,this.onAuthenticated).on(B.error,this.onError)}on(t,e){var a;return(a=this.socket)==null||a.on(t,e.bind(this)),this}onConnected(t){this.connected=!0,this.playback()}onAuthenticated(t){this.authenticated=!0,this.playback()}authenticate(t){var e;(e=this.socket)==null||e.emit(B.authenticate,t)}onError(t){S.error("[SOCKET_ERROR]",t)}enqueue(t,e){S.log("[ENQUEING_ACTION]",{action:t,payload:e}),this.queue.push({action:t,payload:e})}playback(){const t=[...this.queue];this.queue=[],t.forEach(e=>{this.emit(e.action,e.payload)})}emit(t,e=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(t,e);if(!this.connected)return this.enqueue(t,e);this.socket.emit(t,e)}}class Qo extends Ko{constructor(){super();this.on("error",this.onError).on("EARNED_BADGE",this.earnedBadge)}async earnedBadge(t){d.myAwards.push(t),d.newAward=await t.badge,F.getOrCreateInstance(document.getElementById("display-award")).show(),setTimeout(()=>{d.newAward={}},3e3)}onError(t){$.toast(t.message,"error")}}const yt=new Qo,p=Bt({domain:Ut,clientId:Yt,audience:Gt,useRefreshTokens:!0,onRedirectCallback:o=>{vt.push(o&&o.targetUrl?o.targetUrl:window.location.pathname)}});p.on(p.AUTH_EVENTS.AUTHENTICATED,async function(){y.defaults.headers.authorization=p.bearer,y.interceptors.request.use(Zo),d.user=p.user,await Uo.getAccount(),yt.authenticate(p.bearer),await E.getMyHabits(d.user.id),await E.getHabitsByQuery(),await Go.getMyAwards(),await ht.login()});async function Zo(o){if(!p.isAuthenticated)return o;const t=p.identity.exp*1e3,e=t<Date.now(),a=t<Date.now()+1e3*60*60*12;return e?await p.loginWithPopup():a&&(await p.getTokenSilently(),y.defaults.headers.authorization=p.bearer,yt.authenticate(p.bearer)),o}const Jo={setup(){return{user:h(()=>d.user),account:h(()=>d.account),async login(){p.loginWithPopup()},async logout(){p.logout({returnTo:window.location.origin})}}}},Xo=o=>(D("data-v-ef68022e"),o=o(),x(),o),ts={class:"navbar-text"},es={key:1,class:"dropdown my-2 my-lg-0"},as={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},os={key:0,class:"px-2 p-1"},ss=["src"],ns={key:0,class:"mx-3 text-success lighten-30"},is={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},rs=Xo(()=>s("i",{class:"mdi mdi-logout"},null,-1)),cs=G(" logout "),ls=[rs,cs];function ds(o,t,e,a,r,c){return l(),u("span",ts,[a.user.isAuthenticated?(l(),u("div",es,[s("div",as,[a.account.picture?(l(),u("div",os,[s("img",{src:a.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,ss),a.account.picture?m("",!0):(l(),u("span",ns,b(a.account.name),1))])):m("",!0)]),s("div",is,[s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:t[1]||(t[1]=(...n)=>a.logout&&a.logout(...n))},ls)])])):(l(),u("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:t[0]||(t[0]=(...n)=>a.login&&a.login(...n))}," Login "))])}var us=g(Jo,[["render",ds],["__scopeId","data-v-ef68022e"]]),_s=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:us});const hs={setup(){return q(()=>{d.newAward&&setTimeout(()=>{F.getOrCreateInstance(document.getElementById("display-award")).hide()},2e3)}),{}}},bs={class:"modal",tabindex:"-1",role:"dialog"},ms={class:"modal-dialog",role:"document"},gs={class:""},vs={class:"modal-body"};function ys(o,t,e,a,r,c){return l(),u("div",bs,[s("div",ms,[s("div",gs,[s("div",vs,[qt(o.$slots,"body")])])])])}var fs=g(hs,[["render",ys]]),ps=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fs});const ws={setup(){return{}}},ft=o=>(D("data-v-41458b80"),o=o(),x(),o),ks={class:"bg-primary w-100 d-flex align-items-center active pt-2"},As={class:"d-flex justify-content-between col-6"},Ds={class:"d-flex"},xs=G(" Home "),Ss=G(" Stats "),Hs={class:"col-6 text-end d-flex justify-content-end"},$s={class:"modal fade",id:"newHabitModal",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},Cs={class:"modal-dialog",role:"document"},Is={class:"modal-content"},Ts=ft(()=>s("div",{class:"modal-header"},[s("h5",{class:"modal-title"},"What's Your Habit?"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Es={class:"modal-body"},Os=ft(()=>s("button",{class:"m-2 btn btn-info float elevation-5",type:"button",title:"Create a new habit","data-bs-toggle":"modal","data-bs-target":"#newHabitModal"},[s("i",{class:"mdi mdi-plus"})],-1));function Ls(o,t,e,a,r,c){const n=v("router-link"),i=v("Login"),_=v("HabitForm");return l(),u(A,null,[s("nav",ks,[s("div",As,[s("div",Ds,[k(n,{class:"btn text-success lighten-30 selectable text-uppercase",to:{name:"Home"}},{default:lt(()=>[xs]),_:1}),k(n,{to:{name:"Account"},class:"btn text-success lighten-30 selectable text-uppercase"},{default:lt(()=>[Ss]),_:1})])]),s("div",Hs,[k(i)])]),s("div",$s,[s("div",Cs,[s("div",Is,[Ts,s("div",Es,[k(_)])])])]),Os],64)}var Ms=g(ws,[["render",Ls],["__scopeId","data-v-41458b80"]]),js=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ms});R.register(Rt,z,zt,N,V,Nt);const Ps={components:{Doughnut:Vt},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},setup(){return{}}};function Bs(o,t,e,a,r,c){const n=v("Doughnut");return l(),T(n,{"chart-data":e.chartData,"chart-options":e.chartOptions},null,8,["chart-data","chart-options"])}var qs=g(Ps,[["render",Bs]]),Rs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:qs});function zs(o){Object.entries({"./components/AccountCalendarView.vue":ye,"./components/AccountCharts.vue":Te,"./components/AccountMyAwards.vue":Ge,"./components/AccountTopBar.vue":oa,"./components/Award.vue":la,"./components/BarChart.vue":ha,"./components/Habit.vue":Qa,"./components/HabitDetails.vue":ho,"./components/HabitForm.vue":Eo,"./components/HabitWeeklySummary.vue":jo,"./components/LineChart.vue":Ro,"./components/Login.vue":_s,"./components/Modal.vue":ps,"./components/Navbar.vue":js,"./components/PieChart.vue":Rs}).forEach(([e,a])=>{const r=a.name||e.substr(e.lastIndexOf("/")+1).replace(/\.\w+$/,"");o.component(r,a.default)})}const pt=Wt(ae);zs(pt);pt.use(vt).mount("#app");export{d as A,$ as P,g as _,E as h,Ws as q};
