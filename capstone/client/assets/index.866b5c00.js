import{r as xt,a as it,o as Dt,c as h,b as y,d as r,e as d,f as s,g as w,F as A,h as C,t as g,p as x,i as D,j as S,w as R,k as T,l as b,m as L,T as rt,C as z,n as N,q as ct,B as St,s as V,L as F,u as Ht,S as lt,v as $t,x as It,y as k,z as W,A as Ct,M as U,D as Tt,E as Y,G as dt,H as Et,I as ut,J as Ot,K as jt,P as Lt,N as Mt,O as Pt,Q as Bt,R as G,U as qt,V as Rt,W as K,X as zt,Y as Nt,Z as Vt,_ as Ft,$ as Wt}from"./vendor.94673814.js";const Ut=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))t(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function a(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerpolicy&&(l.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?l.credentials="include":c.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(c){if(c.ep)return;c.ep=!0;const l=a(c);fetch(c.href,l)}};Ut();const u=xt({user:{},account:{},habits:[],activeHabit:{},myAwards:[],myHabits:[],day:{},newAward:{},quote:{}}),_t=window.location.origin.includes("localhost"),Q=_t?"http://localhost:3000":"",Yt="dev-wvrfwzhq.us.auth0.com",Gt="lAcTCVPJK7nDO2DAFlGznd09I1Z68b49",Kt="https://JackDev.com",Qt={apiKey:"AIzaSyDeQ2_okhLsFQDNMaciif7MfHxosUmF33Y",authDomain:"ontrak-capstone.firebaseapp.com",projectId:"ontrak-capstone",storageBucket:"ontrak-capstone.appspot.com",messagingSenderId:"289407244703",appId:"1:289407244703:web:c560af06ddfd19f9ecc5aa",measurementId:"G-KBZEQ8SECW"};function O(o,e){if(_t)console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(o){case"log":case"assert":return}console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const H={log(){O("log",arguments)},error(){O("error",arguments)},warn(){O("warn",arguments)},assert(){O("assert",arguments)},trace(){O("trace",arguments)}},f=it.create({baseURL:Q,timeout:8e3}),Ks=it.create({baseURL:"https://bcw-sandbox.herokuapp.com",timeout:8e3});class Zt{async getHabitsByQuery(e){const a=await f.get("api/habits",e);u.myHabits=a.data}async getHabitbyId(e){const a=await f.get("api/habits/"+e);u.activeHabit.unshift(a.data)}async createHabit(e){const a=await f.post("api/habits/",e);u.myHabits.unshift(a.data)}async editHabit(e){const a=await f.put("api/habits/"+e.id,e);let t=u.myHabits.findIndex(c=>c.id===a.data.id);t!=-1&&u.myHabits.splice(t,1,a.data),u.activeHabit=a.data}async archiveHabit(e){await f.delete("api/habits/"+e),u.activeHabit.isActive=!1;let a=u.myHabits.find(t=>t.id===e);a&&(a.isActive=!1)}async getMyHabits(){const e=await f.get("account/habits");u.myHabits=e.data}}const j=new Zt;var v=(o,e)=>{for(const[a,t]of e)o[a]=t;return o};const Jt={name:"App",setup(){function o(){u.day=new Date}return Dt(async()=>{o(),setInterval(o,6e4)}),{appState:h(()=>u)}}},Xt={class:"sticky-md-top"},te={class:"mobile"},ee=s("footer",null,null,-1);function ae(o,e,a,t,c,l){const n=y("Navbar"),i=y("router-view");return r(),d(A,null,[s("header",Xt,[w(n)]),s("main",te,[w(i)]),ee],64)}var oe=v(Jt,[["render",ae]]);const se={setup(){let o=new Date(u.day);o.setDate(o.getDate()+1);let e=new Date;e.setDate(o.getDate()-7);function a(t,c){const l=new Date(t.getTime()),n=[];for(;l<=c;){let i=new Date(l);n.push(i.toISOString().split("T")[0]),l.setDate(l.getDate()+1)}return n}return{habits:h(()=>u.myHabits),week:h(()=>a(e,o))}}},ht=o=>(x("data-v-2b4e666e"),o=o(),D(),o),ne={class:"row"},ie={class:"col-12 bg-light rounded p-3 d-flex flex-column align-items-center brightness"},re=ht(()=>s("p",{class:"text-dark"},"Last 7 Days",-1)),ce={class:"container"},le={class:"col-2 display-none-mobile"},de={class:"d-flex h-100 justify-content-end align-items-center"},ue={class:"text-end"},_e={class:"m-0"},he={class:"display-none-desktop m-0 mt-1"},be=ht(()=>s("div",{class:"col-2 display-none-mobile"},null,-1)),me={class:"row justify-content-center display-none-mobile"},ge={class:"pt-2 m-0"};function ve(o,e,a,t,c,l){const n=y("HabitWeeklySummary");return r(),d("div",ne,[s("div",ie,[re,s("div",ce,[(r(!0),d(A,null,C(t.habits,i=>(r(),d("div",{class:"row text-dark text-center justify-content-center",key:i.id},[s("div",le,[s("div",de,[s("div",ue,[s("p",_e,g(i.title),1)])])]),s("p",he,g(i.title),1),w(n,{habit:i},null,8,["habit"]),be]))),128)),s("div",me,[(r(!0),d(A,null,C(t.week,i=>(r(),d("div",{class:"col-1 box rounded text-dark m-1",key:i},[s("p",ge,g(i.split("-")[1])+"/"+g(i.split("-")[2]),1)]))),128))])])])])}var ye=v(se,[["render",ve],["__scopeId","data-v-2b4e666e"]]),fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ye});const pe={setup(){let o=[],e=[];const a=S(!1);R(()=>{const n=new Date(u.account.createdAt),i=new Date(u.day);i.setDate(i.getDate()+1),u.myHabits.length&&a.value!=!0&&t(n,i)});function t(n,i){const _=new Date(n.getTime()),m=[];for(;_<=i;)m.push(new Date(_)),_.setDate(_.getDate()+1);c(m)}function c(n){for(let i=0;i<n.length;i++){const _=new Date(n[i]);let m=[],et=0;u.myHabits.forEach($=>{if(new Date($.createdAt).getTime()<_.getTime()){m.push($);let at=0,ot=$.trackHistory.findIndex(At=>new Date(_).toDateString());$.trackHistory.forEach(At=>{let st=new Date($.trackHistory[ot]).getDate(),nt=ot;for(;st==new Date($.trackHistory[nt]).getDate();)at++,nt+=$.interval,st--}),et+=at}}),m.length!=0&&(o.push(_.toDateString().split(" ")[2]+" "+_.toDateString().split(" ")[1]),e.push(Math.floor(et)))}a.value=!0}const l=h(()=>{let n=[];return u.myHabits.forEach(i=>n.push({streak:i.streak,title:i.title,color:i.color})),n.sort((i,_)=>i.streak-_.streak).reverse(),n});return{dayLabels:o,dayData:e,lineMax:h(()=>e[-1]*2),lineLoaded:a,topStreaks:h(()=>l.value.slice(0,3)),loaded:h(()=>u.myHabits.length),activeHabitsData:h(()=>{let n=[];return n[0]=u.myHabits.filter(i=>i.isActive).length,n[1]=u.myHabits.filter(i=>!i.isActive).length,n})}}},Z=o=>(x("data-v-1629df44"),o=o(),D(),o),we={class:"bg-primary rounded"},ke={class:"row mb-4"},Ae={class:"col-md-8 bg-light rounded p-3 chartbox"},xe=Z(()=>s("p",{class:"text-dark text-center"},"My Top Streaks",-1)),De={class:"col-md-3 m-start bg-light rounded text-center"},Se=Z(()=>s("p",{class:"text-dark"},"Active / Archived",-1)),He={class:"row"},$e={class:"col-12 p-3 bg-light mb-4 rounded"},Ie=Z(()=>s("p",{class:"text-dark"},"Streak Score",-1));function Ce(o,e,a,t,c,l){const n=y("BarChart"),i=y("PieChart"),_=y("LineChart");return r(),d(A,null,[s("div",we,[s("div",ke,[s("div",Ae,[xe,t.loaded?(r(),T(n,{key:0,chartData:{labels:t.topStreaks.map(m=>m.title),datasets:[{label:"",data:t.topStreaks.map(m=>m.streak),backgroundColor:t.topStreaks.map(m=>m.color)}]},chartOptions:{scales:{y:{ticks:{mirror:!0}}},indexAxis:"y",plugins:{legend:{display:!0,labels:t.topStreaks.map(m=>m.title)}}}},null,8,["chartData","chartOptions"])):b("",!0)]),s("div",De,[Se,w(i,{chartData:{labels:["Active","Archived"],datasets:[{data:t.activeHabitsData,backgroundColor:["#DE9A15","#D1F3EC"]}]}},null,8,["chartData"])])])]),s("div",He,[s("div",$e,[Ie,t.lineLoaded?(r(),T(_,{key:0,chartData:{labels:t.dayLabels,datasets:[{label:"",data:t.dayData,fill:!1,borderColor:"#DE9A15",tension:.1}]},chartOptions:{scales:{y:{suggestedMax:t.dayData[t.dayData.length-1]*1.5,beginAtZero:!0},x:{ticks:{padding:1,autoSkip:!1,maxRotation:30,minRotation:30}}},plugins:{legend:{display:!1}}}},null,8,["chartData","chartOptions"])):b("",!0)])])],64)}var Te=v(pe,[["render",Ce],["__scopeId","data-v-1629df44"]]),Ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Te});const Oe={setup(){return{myHabitAwards:h(()=>u.myAwards.filter(o=>o.habitId)),myAccountAwards:h(()=>u.myAwards.filter(o=>!o.habitId))}}},J=o=>(x("data-v-27f71368"),o=o(),D(),o),je={class:"row mb-4"},Le={class:"col-12 bg-light rounded p-3"},Me=J(()=>s("p",{class:"text-dark"},"My Awards",-1)),Pe={class:"row text-center text-dark justify-content-around"},Be={key:0},qe=J(()=>s("u",null,"Habit Awards",-1)),Re=[qe],ze=["src","title"],Ne={key:1},Ve={key:2},Fe=J(()=>s("u",null,"Account Awards",-1)),We=[Fe],Ue=["src"];function Ye(o,e,a,t,c,l){return r(),d("div",je,[s("div",Le,[Me,s("div",Pe,[t.myHabitAwards.length?(r(),d("p",Be,Re)):b("",!0),(r(!0),d(A,null,C(t.myHabitAwards,n=>(r(),d("div",{class:"col-3",key:n.id},[s("img",{src:n.img,class:"img-fluid",title:"Streak award for "+n.habit.title},null,8,ze)]))),128)),t.myAccountAwards.length&&t.myHabitAwards.length?(r(),d("hr",Ne)):b("",!0),t.myAccountAwards.length?(r(),d("p",Ve,We)):b("",!0),(r(!0),d(A,null,C(t.myAccountAwards,n=>(r(),d("div",{class:"col-3",key:n.id},[s("img",{src:n.img,class:"img-fluid"},null,8,Ue)]))),128))])])])}var Ge=v(Oe,[["render",Ye],["__scopeId","data-v-27f71368"]]),Ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ge});const Qe={setup(){return{myHabits:h(()=>u.myHabits),awards:h(()=>u.myAwards),quote:h(()=>u.quote)}}},Ze={class:"container"},Je={class:"row"},Xe={class:"col-md-3 g-0"},ta={class:"bg-primary rounded mt-4 me-3 p-3"},ea={class:"col-md-9 g-0"},aa={class:"ms-auto bg-primary rounded mt-4 p-3"},oa={key:0},sa={key:0,class:"text-end"};function na(o,e,a,t,c,l){return r(),d("div",Ze,[s("div",Je,[s("div",Xe,[s("div",ta,[s("h5",null,"Habits: "+g(t.myHabits.length),1),s("h5",null,"Awards: "+g(t.awards.length),1)])]),s("div",ea,[s("div",aa,[w(rt,{name:"slide-fade"},{default:L(()=>[t.quote?(r(),d("p",oa,g(t.quote.content),1)):b("",!0)]),_:1}),w(rt,{name:"slide-fade"},{default:L(()=>[t.quote?(r(),d("p",sa,[s("i",null,"-"+g(t.quote.author),1)])):b("",!0)]),_:1})])])])])}var ia=v(Qe,[["render",na],["__scopeId","data-v-7b03a8e0"]]),ra=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ia});const ca={props:{award:{type:Object,required:!0}},setup(){return{}}},la={class:"component"},da=["src","title"];function ua(o,e,a,t,c,l){return r(),d("div",la,[s("img",{src:a.award.img,height:"270",alt:"",title:a.award.title,class:"award-mobile",style:{filter:"brightness(70%)"}},null,8,da)])}var _a=v(ca,[["render",ua]]),ha=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_a});z.register(N,ct,St,V,F);const ba={components:{Bar:Ht},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},setup(){return{height:150}}};function ma(o,e,a,t,c,l){const n=y("Bar");return r(),T(n,{"chart-data":a.chartData,"chart-options":a.chartOptions,height:t.height},null,8,["chart-data","chart-options","height"])}var ga=v(ba,[["render",ma]]),va=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ga});class I{static async confirm(e="Are you sure?",a="You won't be able to revert this!",t="warning",c="Yes, archive it!"){try{return!!(await lt.fire({title:e,text:a,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c})).isConfirmed}catch{return!1}}static toast(e="Warning!",a="warning",t="top-end",c=3e3,l=!0){lt.fire({title:e,icon:a,position:t,timer:c,timerProgressBar:l,toast:!0,showConfirmButton:!1})}}const ya={props:{habit:{type:Object,required:!0}},setup(o){const e=S(!1),a=$t(),t=S(!1),c=S(!1),l=S(!1),n=new Date(o.habit.trackHistory[0]),i=u.day.getDate()-n.getDate(),_=!o.habit.trackHistory[0];return R(async()=>{n.toDateString()==u.day.toDateString()&&o.habit.interval>i&&(t.value=!0),i>o.habit.interval&&l.value!=!0&&(l.value=!0,o.habit.streak=0,await j.editHabit(o.habit))}),{isNew:_,lastTracked:n,timeSinceLastTracked:i,isTracked:t,isChecked:c,missed:l,flip:e,account:h(()=>u.account),myHabitAwards:h(()=>u.myAwards.filter(m=>m.habitId==o.habit.id)),goToHabitsDetailPage(){a.push({name:"HabitsDetailPage",params:{id:"h-"+o.habit.id}})},toggle(){e.value=!e.value,e.value?document.getElementById("h-"+o.habit.id).classList.remove("round"):document.getElementById("h-"+o.habit.id).classList.add("round"),It.getOrCreateInstance(document.getElementById(o.habit.id)).toggle()},async checkIn(){try{c.value=!0,o.habit.trackHistory.unshift(new Date),o.habit.streak++,await j.editHabit(o.habit)}catch(m){H.error(m),I.toast(m.message,"error")}}}}},E=o=>(x("data-v-7844463c"),o=o(),D(),o),fa={class:"col-12 d-flex justify-content-center w-100 align-items-center"},pa={id:"habit",class:"mt-3 justify-content-center"},wa=["id"],ka={class:"d-flex col-8"},Aa={key:0,class:"mdi mdi-clock-alert-outline mx-2",title:"Check-in to keep your streak"},xa=E(()=>s("span",{class:"mdi mdi-menu-down col-1"},null,-1)),Da={key:0,class:"mdi mdi-bell-alert col-1 text-end",title:"You missed your check-in!"},Sa={key:1},Ha=E(()=>s("h5",{class:"col-1"},[s("i",null,"Archived")],-1)),$a=[Ha],Ia={key:2},Ca={key:0,class:"form-check"},Ta=E(()=>s("label",{class:"form-check-label visually-hidden",for:""}," Check if Habit Completed ",-1)),Ea=E(()=>s("h5",null,null,-1)),Oa={key:3,class:"d-flex align-items-center"},ja=E(()=>s("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 130.2 130.2"},[s("circle",{class:"path circle",fill:"none",stroke:"#121213","stroke-width":"6","stroke-miterlimit":"10",cx:"65.1",cy:"65.1",r:"62.1"}),s("polyline",{class:"path check",fill:"none",stroke:"#121213","stroke-width":"6","stroke-linecap":"round","stroke-miterlimit":"10",points:"100.2,40.2 51.5,88.8 29.8,67.5 "})],-1)),La=[ja],Ma=["id"],Pa={class:"row w-100"},Ba={class:"col-md-6"},qa={class:"p-2 m-2"},Ra={key:0},za={key:0},Na={key:1},Va={key:1,class:"text-start my-4"},Fa={class:"col-md-6 mb-4 align-items-center"},Wa={class:"h-100 rounded"},Ua={key:0,class:"p-2 m-2"},Ya={id:"badges",class:"d-flex m-3"},Ga=["src"],Ka={key:1,class:"text-dark row m-1"},Qa=E(()=>s("h5",{class:"m-1"},"Last 7 days",-1)),Za={class:"col-12 d-flex"};function Ja(o,e,a,t,c,l){const n=y("HabitWeeklySummary");return r(),d("div",fa,[s("div",pa,[s("div",{class:"habit-bar d-flex justify-content-between align-items-center round text-start",style:k("background-color: "+a.habit.color),type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne",id:"h-"+a.habit.id,onClick:e[1]||(e[1]=W((...i)=>t.toggle&&t.toggle(...i),["stop"]))},[s("div",ka,[a.habit.interval-t.timeSinceLastTracked<1&&a.habit.isActive?(r(),d("div",Aa)):b("",!0),s("h5",null,g(a.habit.title),1),xa]),t.missed&&a.habit.isActive?(r(),d("div",Da)):b("",!0),a.habit.isActive?!t.isTracked||t.isNew?(r(),d("div",Ia,[t.isNew||t.timeSinceLastTracked>=a.habit.interval?(r(),d("div",Ca,[s("input",{type:"checkbox",class:"form-check-input border border-primary",title:"mark habit complete",name:"",id:"",value:"checkedValue",onClick:e[0]||(e[0]=W((...i)=>t.checkIn&&t.checkIn(...i),["stop"]))}),Ta,Ea])):b("",!0)])):t.isTracked?(r(),d("div",Oa,La)):b("",!0):(r(),d("div",Sa,$a))],12,wa),s("div",{id:a.habit.id,class:"collapse hide habit-body","aria-labelledby":"headingOne","data-parent":"#accordionExample"},[s("div",{class:"shadow short-round",style:k("filter: hue-rotate(5deg) brightness(140%); background-color: "+a.habit.color)},[s("div",Pa,[s("div",Ba,[s("div",qa,[a.habit.isActive?(r(),d("span",Ra,[t.isTracked?(r(),d("h4",za,"You've completed this habit today!")):b("",!0),s("p",null,"Your streak is "+g(a.habit.streak)+" days.",1),a.habit.interval-t.timeSinceLastTracked>0?(r(),d("p",Na," You'll be reminded of this habit again in "+g(a.habit.interval-t.timeSinceLastTracked)+" day"+g(a.habit.interval-t.timeSinceLastTracked>1?"s":""),1)):b("",!0)])):b("",!0),a.habit.isActive?b("",!0):(r(),d("div",Va," This habit has been archived. ")),s("button",{class:"m-0 btn btn-outline-dark justify-flex-start d-flex",onClick:e[2]||(e[2]=i=>t.goToHabitsDetailPage())}," See More... ")])]),s("div",Fa,[s("div",Wa,[t.myHabitAwards[0]?(r(),d("h3",Ua," My badges for this habit ")):b("",!0),s("div",Ya,[(r(!0),d(A,null,C(t.myHabitAwards,i=>(r(),d("img",{key:i.id,src:i.img,alt:"",height:"100",style:{filter:"brightness(80%)"}},null,8,Ga))),128))]),a.habit.interval<7&&a.habit.isActive?(r(),d("div",Ka,[Qa,s("div",Za,[w(n,{habit:a.habit},null,8,["habit"])])])):b("",!0)])])])],4)],8,Ma)])])}var Xa=v(ya,[["render",Ja],["__scopeId","data-v-7844463c"]]),to=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xa});const eo={props:{habit:{type:Object,required:!0}},setup(o){return{awards:h(()=>u.myAwards.filter(e=>e.habitId==o.habit.id)),async archiveHabit(){try{await I.confirm("Are you sure?","This habit will be archived, not deleted. Archived habits are not tracked and cannot be interacted with. ","warning","Yes, archive it.")&&await j.archiveHabit(o.habit.id)}catch(e){H.error(e),I.toast(e.message,"error")}}}}},X=o=>(x("data-v-7bcf8a6c"),o=o(),D(),o),ao=["id"],oo={class:"darken-30 p-3 mt-3 w-100"},so={class:"mt-3 justify-content-center"},no=X(()=>s("h3",null,"Habit",-1)),io={key:1},ro=X(()=>s("i",null,"Archived",-1)),co=[ro],lo={class:"col-12 p-1 rounded bg-light"},uo={class:"col-12 p-1 my-2 rounded bg-light"},_o=X(()=>s("h3",null,"Last 7 Days",-1)),ho={class:"col-12 d-flex justify-content-center"},bo={class:"col-12 bg-light d-flex justify-content-around"};function mo(o,e,a,t,c,l){const n=y("HabitWeeklySummary"),i=y("Award");return r(),d("div",{class:"col-12 d-flex fit-content(100vh) containerScroll container-scroll align-items-center scrollsnap",id:"h-"+a.habit.id},[s("div",oo,[s("div",so,[s("div",{class:"darken-30 w-100 p-3 m-0 d-flex justify-content-between rounded-top",style:k("background-color: "+a.habit.color)},[no,a.habit.isActive?(r(),d("button",{key:0,class:"btn btn-outline-dark",onClick:e[0]||(e[0]=_=>t.archiveHabit())}," Archive Habit ")):(r(),d("h5",io,co))],4),s("div",{class:"rounded-bottom p-3",style:k("filter: hue-rotate(5deg) brightness(140%); background-color: "+a.habit.color)},[s("h3",null,g(a.habit.title),1),s("div",lo,[s("h5",null,g(a.habit.inspo),1)]),s("div",uo,[s("h6",null," Current Streak: "+g(a.habit.streak)+" Max Streak: "+g(a.habit.maxStreak),1)]),_o,s("div",ho,[w(n,{habit:a.habit},null,8,["habit"])]),s("div",bo,[(r(!0),d(A,null,C(t.awards,_=>(r(),T(i,{key:_.id,award:_},null,8,["award"]))),128))])],4)])])],8,ao)}var go=v(eo,[["render",mo],["__scopeId","data-v-7bcf8a6c"]]),vo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:go});const bt=Ct.initializeApp(Qt),yo=bt.auth(),fo=bt.storage();class po{async login(){try{const a=(await f.get("account/firebase")).data.token;await yo.signInWithCustomToken(a)}catch(e){H.error(e),I.toast(e.message,"error")}}async upload(e){return await(await fo.ref("Images").child("images").child("badges").child(e.name).put(e,{customMetadata:{uid:u.account.id,size:e.size,type:"Images"}})).ref.getDownloadURL()}}const mt=new po;const tt={setup(){const o=S({}),e=S([]),a=S(!1);return{showImgInput:a,formData:o,formColor:h(()=>`${o.value.color}`),account:h(()=>u.account),day:h(()=>u.day),toggleImgInput(){a.value=!a.value},setImage(t){e.value=t.target.files},async upload(){try{const t=await mt.upload(e.value[0])}catch(t){H.error(t),I.toast(t.message,"error")}},async newHabit(){try{o.value.interval=document.getElementById("habit-interval").value,o.value.accountId=this.account.id,await j.createHabit(o.value),o.value={},U.getOrCreateInstance(document.getElementById("newHabitModal")).toggle()}catch(t){H.error(t),I.toast(t.message,"error")}}}}},gt=()=>{Tt(o=>({"221fbfc4":o.formColor}))},vt=tt.setup;tt.setup=vt?(o,e)=>(gt(),vt(o,e)):gt;const wo=tt,M=o=>(x("data-v-6b592a5a"),o=o(),D(),o),ko={class:"mb-3"},Ao=M(()=>s("label",{for:"habit-title",class:"form-label"},"Give it a title:",-1)),xo={class:"mb-3"},Do={class:"d-flex justify-content-between"},So=M(()=>s("label",{for:"habit-inspo",class:"form-label"},"Why are you making this Habit?",-1)),Ho={key:0},$o={key:1},Io=M(()=>s("small",{id:"helpId",class:"form-text text-muted"},"This is optional, but we will show it to you later.",-1)),Co={class:"input-group mb-3"},To=M(()=>s("label",{class:"form-check-label visually-hidden",id:"color-label",name:"color",for:"color"},"Choose Color",-1)),Eo=ut('<option class="border-top border-dark bg-danger dropdown-item" value="#EA9D55" data-v-6b592a5a> Orange </option><option class="border-top border-dark bg-warning dropdown-item" selected value="#FFECA8" data-v-6b592a5a> Yellow </option><option class="border-top border-dark bg-success dropdown-item" value="#D1F3EC" data-v-6b592a5a> Aqua </option><option class="border-top border-dark bg-primary dropdown-item text-light" value="#74A59A" data-v-6b592a5a> Green </option><option class="border-top border-dark bg-purple dropdown-item" value="#9BA5FF" data-v-6b592a5a> Purple </option>',5),Oo=[Eo],jo=ut('<div class="mb-3" data-v-6b592a5a><label for="habit-interval" data-v-6b592a5a>How often do you want us to remind you?</label><select name="habit-interval" id="habit-interval" class="rounded p-1 ms-2" required data-v-6b592a5a><option selected value="1" data-v-6b592a5a>Daily</option><option value="2" data-v-6b592a5a>Every other day</option><option value="7" data-v-6b592a5a>Weekly</option><option value="28" data-v-6b592a5a>Monthly</option></select></div><div class="modal-footer" data-v-6b592a5a><button type="button" class="btn btn-secondary" data-bs-target="newHabitModal" data-bs-dismiss="modal" data-v-6b592a5a> Close </button><button type="submit" class="btn btn-primary" data-v-6b592a5a>Submit</button></div>',2);function Lo(o,e,a,t,c,l){return r(),d("form",{name:"newHabitForm",onSubmit:e[4]||(e[4]=W((...n)=>t.newHabit&&t.newHabit(...n),["prevent"]))},[s("div",ko,[Ao,Y(s("input",{type:"text",class:"form-control",id:"habit-title",placeholder:"","onUpdate:modelValue":e[0]||(e[0]=n=>t.formData.title=n),required:"",max:"40"},null,512),[[dt,t.formData.title]])]),s("div",xo,[s("div",Do,[So,s("label",{class:"selectable px-1 rounded",onClick:e[1]||(e[1]=(...n)=>t.toggleImgInput&&t.toggleImgInput(...n)),for:""},[t.showImgInput?b("",!0):(r(),d("span",Ho,"Add an image")),t.showImgInput?(r(),d("span",$o,"Actually, just text")):b("",!0)])]),Y(s("input",{type:"text",class:"form-control",id:"habit-inspo",placeholder:"","onUpdate:modelValue":e[2]||(e[2]=n=>t.formData.inspo=n),max:"1000"},null,512),[[dt,t.formData.inspo]]),Io]),s("div",Co,[To,Y(s("select",{class:"form-select rounded",required:"",name:"color",id:"color","aria-label":"Default select example",placeholder:"Choose A Color","onUpdate:modelValue":e[3]||(e[3]=n=>t.formData.color=n)},Oo,512),[[Et,t.formData.color]])]),jo],32)}var Mo=v(wo,[["render",Lo],["__scopeId","data-v-6b592a5a"]]),Po=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mo});const Bo={props:{habit:{type:Object,required:!0}},setup(o){const e=Ot();let a=new Date(u.day);a.setDate(a.getDate()+1);let t=new Date;t.setDate(a.getDate()-7);function c(l,n){const i=new Date(l.getTime()),_=[];for(;i<=n;){let m=new Date(i);_.push(m.toISOString().split("T")[0]),i.setDate(i.getDate()+1)}return _}return{route:e,today:h(()=>new Date),week:c(t,a),trackHistory:h(()=>{let l=[];return o.habit.trackHistory.forEach(n=>{let i=new Date(n);l.push(i.toISOString().split("T")[0])}),l})}}};function qo(o,e,a,t,c,l){return r(),d(A,null,[s("div",{class:"col-1 m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[0])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[1])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[2])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[3])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[4])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[5])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4),s("div",{class:"col-1 m-1 rounded border box",style:k("background-color: "+(t.trackHistory.includes(t.week[6])?a.habit.color+"; filter: brightness(70%) !important;":"gray"))},null,4)],64)}var Ro=v(Bo,[["render",qo]]),zo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ro});z.register(N,jt,V,F,Lt);const No={components:{Line:Mt},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},setup(){return{height:200}}};function Vo(o,e,a,t,c,l){const n=y("Line");return r(),T(n,{"chart-data":a.chartData,"chart-options":a.chartOptions,height:t.height},null,8,["chart-data","chart-options","height"])}var Fo=v(No,[["render",Vo]]),Wo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fo});const Uo="modulepreload",yt={},Yo="/",P=function(e,a){return!a||a.length===0?e():Promise.all(a.map(t=>{if(t=`${Yo}${t}`,t in yt)return;yt[t]=!0;const c=t.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const n=document.createElement("link");if(n.rel=c?"stylesheet":Uo,c||(n.as="script",n.crossOrigin=""),n.href=t,document.head.appendChild(n),c)return new Promise((i,_)=>{n.addEventListener("load",i),n.addEventListener("error",_)})})).then(()=>e())};function Go(o){switch(o){case"./pages/AboutPage.vue":return P(()=>import("./AboutPage.7867b3c3.js"),["assets/AboutPage.7867b3c3.js","assets/vendor.94673814.js"]);case"./pages/AccountPage.vue":return P(()=>import("./AccountPage.e7cb8a90.js"),["assets/AccountPage.e7cb8a90.js","assets/vendor.94673814.js"]);case"./pages/HabitsDetailPage.vue":return P(()=>import("./HabitsDetailPage.f29a2f76.js"),["assets/HabitsDetailPage.f29a2f76.js","assets/vendor.94673814.js"]);case"./pages/HomePage.vue":return P(()=>import("./HomePage.63db53d5.js"),["assets/HomePage.63db53d5.js","assets/vendor.94673814.js"]);default:return new Promise(function(e,a){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function B(o){return()=>Go(`./pages/${o}.vue`)}const Ko=[{path:"/",name:"Home",component:B("HomePage"),beforeEnter:G},{path:"/about",name:"About",component:B("AboutPage")},{path:"/habitsDetailPage/:id",name:"HabitsDetailPage",component:B("HabitsDetailPage"),beforeEnter:G},{path:"/account",name:"Account",component:B("AccountPage"),beforeEnter:G}],ft=Pt({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:Bt(),routes:Ko});class Qo{async getAccount(){try{const e=await f.get("/account");u.account=e.data}catch(e){H.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async editAccount(e){const a=await f.put("/account",e);u.account=a.data}async getMyAwards(){const e=await f.get("/account/awards");u.myAwards=e.data}}const Zo=new Qo;class Jo{async getMyAwards(){const e=await f.get("/account/awards");u.myAwards=e.data}}const Xo=new Jo,q={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class ts{constructor(e=!1,a=Q){this.socket=qt(a||Q),this.requiresAuth=e,this.queue=[],this.authenticated=!1,this.on(q.connected,this.onConnected).on(q.authenticated,this.onAuthenticated).on(q.error,this.onError)}on(e,a){var t;return(t=this.socket)==null||t.on(e,a.bind(this)),this}onConnected(e){this.connected=!0,this.playback()}onAuthenticated(e){this.authenticated=!0,this.playback()}authenticate(e){var a;(a=this.socket)==null||a.emit(q.authenticate,e)}onError(e){H.error("[SOCKET_ERROR]",e)}enqueue(e,a){H.log("[ENQUEING_ACTION]",{action:e,payload:a}),this.queue.push({action:e,payload:a})}playback(){const e=[...this.queue];this.queue=[],e.forEach(a=>{this.emit(a.action,a.payload)})}emit(e,a=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,a);if(!this.connected)return this.enqueue(e,a);this.socket.emit(e,a)}}class es extends ts{constructor(){super();this.on("error",this.onError).on("EARNED_BADGE",this.earnedBadge)}async earnedBadge(e){u.myAwards.push(e),u.newAward=await e.badge,U.getOrCreateInstance(document.getElementById("display-award")).show(),setTimeout(()=>{u.newAward={}},3e3)}onError(e){I.toast(e.message,"error")}}const pt=new es,p=Rt({domain:Yt,clientId:Gt,audience:Kt,useRefreshTokens:!0,onRedirectCallback:o=>{ft.push(o&&o.targetUrl?o.targetUrl:window.location.pathname)}});p.on(p.AUTH_EVENTS.AUTHENTICATED,async function(){f.defaults.headers.authorization=p.bearer,f.interceptors.request.use(as),u.user=p.user,await Zo.getAccount(),pt.authenticate(p.bearer),await j.getMyHabits(u.user.id),await Xo.getMyAwards(),await mt.login()});async function as(o){if(!p.isAuthenticated)return o;const e=p.identity.exp*1e3,a=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return a?await p.loginWithPopup():t&&(await p.getTokenSilently(),f.defaults.headers.authorization=p.bearer,pt.authenticate(p.bearer)),o}const os={setup(){return{user:h(()=>u.user),account:h(()=>u.account),async login(){p.loginWithPopup()},async logout(){p.logout({returnTo:window.location.origin})}}}},ss=o=>(x("data-v-4833fd88"),o=o(),D(),o),ns={class:"navbar-text"},is={key:1,class:"dropdown my-2 my-lg-0"},rs={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},cs={key:0,class:"px-2 p-1"},ls=["src"],ds={key:0,class:"mx-3 text-success lighten-30"},us={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},_s=ss(()=>s("i",{class:"mdi mdi-logout"},null,-1)),hs=K(" logout "),bs=[_s,hs];function ms(o,e,a,t,c,l){return r(),d("span",ns,[t.user.isAuthenticated?(r(),d("div",is,[s("div",rs,[t.account.picture?(r(),d("div",cs,[s("img",{src:t.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,ls),t.account.picture?b("",!0):(r(),d("span",ds,g(t.account.name),1))])):b("",!0)]),s("div",us,[s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...n)=>t.logout&&t.logout(...n))},bs)])])):(r(),d("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...n)=>t.login&&t.login(...n))}," Login "))])}var gs=v(os,[["render",ms],["__scopeId","data-v-4833fd88"]]),vs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:gs});const ys={setup(){return R(()=>{u.newAward&&setTimeout(()=>{U.getOrCreateInstance(document.getElementById("display-award")).hide()},2e3)}),{}}},fs={class:"modal",tabindex:"-1",role:"dialog"},ps={class:"modal-dialog",role:"document"},ws={class:""},ks={class:"modal-body"};function As(o,e,a,t,c,l){return r(),d("div",fs,[s("div",ps,[s("div",ws,[s("div",ks,[zt(o.$slots,"body")])])])])}var xs=v(ys,[["render",As]]),Ds=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xs});const Ss={setup(){return{account:h(()=>u.account)}}},wt=o=>(x("data-v-e8799c2c"),o=o(),D(),o),Hs={class:"bg-primary w-100 d-flex align-items-center active pt-2"},$s={class:"d-flex justify-content-between col-6"},Is={class:"d-flex"},Cs=K(" Home "),Ts=K(" Stats "),Es={class:"col-6 text-end d-flex justify-content-end"},Os={class:"modal fade",id:"newHabitModal",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},js={class:"modal-dialog",role:"document"},Ls={class:"modal-content"},Ms=wt(()=>s("div",{class:"modal-header"},[s("h5",{class:"modal-title"},"What's Your Habit?"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Ps={key:0,class:"modal-body"},Bs=wt(()=>s("button",{class:"m-2 btn btn-info float elevation-5",type:"button",title:"Create a new habit","data-bs-toggle":"modal","data-bs-target":"#newHabitModal"},[s("i",{class:"mdi mdi-plus"})],-1));function qs(o,e,a,t,c,l){const n=y("router-link"),i=y("Login"),_=y("HabitForm");return r(),d(A,null,[s("nav",Hs,[s("div",$s,[s("div",Is,[s("h1",null,[w(n,{class:"btn text-success lighten-30 selectable text-uppercase",to:{name:"Home"}},{default:L(()=>[Cs]),_:1}),w(n,{to:{name:"Account"},class:"btn text-success lighten-30 selectable text-uppercase"},{default:L(()=>[Ts]),_:1})])])]),s("div",Es,[w(i)])]),s("div",Os,[s("div",js,[s("div",Ls,[Ms,t.account.id?(r(),d("div",Ps,[w(_)])):b("",!0)])])]),Bs],64)}var Rs=v(Ss,[["render",qs],["__scopeId","data-v-e8799c2c"]]),zs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Rs});z.register(Nt,N,ct,V,F,Vt);const Ns={components:{Doughnut:Ft},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},setup(){return{}}};function Vs(o,e,a,t,c,l){const n=y("Doughnut");return r(),T(n,{"chart-data":a.chartData,"chart-options":a.chartOptions},null,8,["chart-data","chart-options"])}var Fs=v(Ns,[["render",Vs]]),Ws=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fs});function Us(o){Object.entries({"./components/AccountCalendarView.vue":fe,"./components/AccountCharts.vue":Ee,"./components/AccountMyAwards.vue":Ke,"./components/AccountTopBar.vue":ra,"./components/Award.vue":ha,"./components/BarChart.vue":va,"./components/Habit.vue":to,"./components/HabitDetails.vue":vo,"./components/HabitForm.vue":Po,"./components/HabitWeeklySummary.vue":zo,"./components/LineChart.vue":Wo,"./components/Login.vue":vs,"./components/Modal.vue":Ds,"./components/Navbar.vue":zs,"./components/PieChart.vue":Ws}).forEach(([a,t])=>{const c=t.name||a.substr(a.lastIndexOf("/")+1).replace(/\.\w+$/,"");o.component(c,t.default)})}const kt=Wt(oe);Us(kt);kt.use(ft).mount("#app");export{u as A,I as P,v as _,j as h,Ks as q};
